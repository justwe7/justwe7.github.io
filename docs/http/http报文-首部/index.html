<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-http/http报文-首部" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">http报文-首部 - 土豆和土豆丝写字的地方</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://wiki.lihx.top/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://wiki.lihx.top/img/logo.png"><meta data-rh="true" property="og:url" content="https://wiki.lihx.top/docs/http/http报文-首部"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="keywords" content="土豆和土豆丝"><meta data-rh="true" name="keywords" content="blog, javascript, typescript, node, react, vue, web, 小程序"><meta data-rh="true" name="keywords" content="前端开发"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="http报文-首部 - 土豆和土豆丝写字的地方"><meta data-rh="true" name="description" content="- http报文首部"><meta data-rh="true" property="og:description" content="- http报文首部"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wiki.lihx.top/docs/http/http报文-首部"><link data-rh="true" rel="alternate" href="https://wiki.lihx.top/docs/http/http报文-首部" hreflang="zh"><link data-rh="true" rel="alternate" href="https://wiki.lihx.top/docs/http/http报文-首部" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","4395927556","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4LKHLLWJBC"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-4LKHLLWJBC",{anonymize_ip:!0})</script>




<script defer="defer">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?03bd357b8e5a65d704a7acbc2ed52566";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
<script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",t.defer=!0;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script>
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="土豆和土豆丝 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="土豆和土豆丝 Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="土豆和土豆丝 JSON Feed">

<link rel="icon" href="/hero.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(51 139 255)"><link rel="stylesheet" href="/assets/css/styles.94fe75c2.css">
<link rel="preload" href="/assets/js/runtime~main.cf82b7b3.js" as="script">
<link rel="preload" href="/assets/js/main.971e4e51.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/hero.png" alt="土豆和土豆丝" class="themedImage_ToTc themedImage--light_HNdA"><img src="/hero.png" alt="土豆和土豆丝" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">土豆和土豆丝</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">笔记</a><a class="navbar__item navbar__link" href="/archive">博客</a><a class="navbar__item navbar__link" href="/project">项目</a><a class="navbar__item navbar__link" href="/website">网址收藏</a><a href="https://lihx.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">个人博客<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/justwe7/justwe7.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/hero.png" alt="土豆和土豆丝" class="themedImage_ToTc themedImage--light_HNdA"><img src="/hero.png" alt="土豆和土豆丝" class="themedImage_ToTc themedImage--dark_i4oU"><b>土豆和土豆丝</b></a><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/AI/Gpts提示词攻防">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Flutter/Fultter">Flutter</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/git/gitcherry-pick备忘">git</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/http/http报文-概念状态码">http</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/http/http报文-概念状态码">http报文-概念状态码</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/http/http报文-首部">http报文-首部</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/http/web及网络基础">web及网络基础</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/http/什么是https">什么是https</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/http/简单了解http协议">简单了解http协议</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/javascript/JavaScript中的柯里化">javascript</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/vue/vue2迁移vue3">vue</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/前端工程化/gitpage+vuepress+jenkins静态博客">前端工程化</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/搞定typescript/声明文件">搞定typescript</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/服务端基础/HTTP2常见问题">服务端基础</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/编程备忘录/Edge浏览器点击会有光标闪烁">编程备忘录</a></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">http</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">http报文-首部</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>http报文-首部</h1></header><ul><li><a href="#http%e6%8a%a5%e6%96%87%e9%a6%96%e9%83%a8">http报文首部</a><ul><li><a href="#http-%e8%af%b7%e6%b1%82%e6%8a%a5%e6%96%87">HTTP 请求报文</a></li><li><a href="#http-%e5%93%8d%e5%ba%94%e6%8a%a5%e6%96%87">HTTP 响应报文</a></li><li><a href="#http-%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%e4%bd%9c%e7%94%a8">HTTP 首部字段作用</a></li><li><a href="#4-%e7%a7%8dhttp%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%e7%b1%bb%e5%9e%8b">4 种HTTP首部字段类型</a></li><li><a href="#chrome%e5%93%8d%e5%ba%94%e9%a6%96%e9%83%a8%e5%87%ba%e7%8e%b0provisional-headers-are-shown">Chrome响应首部出现Provisional headers are shown</a></li></ul></li><li><a href="#http%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%e8%a1%a8">http首部字段表</a><ul><li><a href="#%e9%80%9a%e7%94%a8%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5">通用首部字段</a></li><li><a href="#%e8%af%b7%e6%b1%82%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5">请求首部字段</a></li><li><a href="#%e5%93%8d%e5%ba%94%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5">响应首部字段</a></li><li><a href="#%e5%ae%9e%e4%bd%93%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5">实体首部字段</a></li><li><a href="#%e7%ab%af%e5%88%b0%e7%ab%af%e9%a6%96%e9%83%a8%e5%92%8c%e9%80%90%e8%b7%b3%e9%a6%96%e9%83%a8">端到端首部和逐跳首部</a></li></ul></li><li><a href="#http11%e9%80%9a%e7%94%a8%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%e8%af%a6%e8%a7%a3">HTTP/1.1通用首部字段详解</a><ul><li><a href="#cache-control">Cache-Control</a><ul><li><a href="#%e8%a1%a8%e7%a4%ba%e6%98%af%e5%90%a6%e8%83%bd%e7%bc%93%e5%ad%98%e7%9a%84%e6%8c%87%e4%bb%a4">表示是否能缓存的指令</a></li><li><a href="#%e6%8e%a7%e5%88%b6%e5%8f%af%e6%89%a7%e8%a1%8c%e7%bc%93%e5%ad%98%e7%9a%84%e5%af%b9%e8%b1%a1%e7%9a%84%e6%8c%87%e4%bb%a4">控制可执行缓存的对象的指令</a></li><li><a href="#%e6%8c%87%e5%ae%9a%e7%bc%93%e5%ad%98%e6%9c%9f%e9%99%90%e5%92%8c%e8%ae%a4%e8%af%81%e7%9a%84%e6%8c%87%e4%bb%a4">指定缓存期限和认证的指令</a></li><li><a href="#cache-control-%e6%89%a9%e5%b1%95">Cache-Control 扩展</a></li></ul></li><li><a href="#connection">Connection</a></li><li><a href="#upgrade">Upgrade</a></li></ul></li><li><a href="#%e8%af%b7%e6%b1%82%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%e8%af%a6%e8%a7%a3">请求首部字段详解</a><ul><li><a href="#accept">Accept</a></li><li><a href="#accept-encoding">Accept-Encoding</a></li><li><a href="#if-xxxxx-%e6%9d%a1%e4%bb%b6%e8%af%b7%e6%b1%82">If-XXXXX (条件请求)</a><ul><li><a href="#if-match">If-Match</a></li><li><a href="#if-modified-since">If-Modified-Since</a></li><li><a href="#if-none-match">If-None-Match</a></li><li><a href="#if-range">If-Range</a></li><li><a href="#if-unmodified-since">If-Unmodified-Since</a></li></ul></li><li><a href="#range">Range</a></li><li><a href="#cookie">Cookie</a></li></ul></li><li><a href="#%e5%93%8d%e5%ba%94%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%e8%af%a6%e8%a7%a3">响应首部字段详解</a><ul><li><a href="#etag">ETag</a><ul><li><a href="#%e5%bc%baetag-%e5%80%bc">强ETag 值</a></li><li><a href="#%e5%bc%b1etag-%e5%80%bc">弱ETag 值</a></li></ul></li><li><a href="#location">Location</a></li><li><a href="#vary">Vary</a></li><li><a href="#set-cookie">Set-Cookie</a></li></ul></li><li><a href="#%e5%ae%9e%e4%bd%93%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%e8%af%a6%e8%a7%a3">实体首部字段详解</a><ul><li><a href="#expires">Expires</a></li><li><a href="#last-modified">Last-Modified</a></li></ul></li><li><a href="#%e5%85%b6%e4%bb%96%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5">其他首部字段</a><ul><li><a href="#x-frame-options">X-Frame-Options</a></li><li><a href="#x-xss-protection">X-XSS-Protection</a></li><li><a href="#dnt">DNT</a></li><li><a href="#p3p">P3P</a></li><li><a href="#%e9%83%a8%e5%88%86web%e5%ae%89%e5%85%a8%e5%b8%b8%e8%af%86">部分web安全常识</a></li></ul></li><li><a href="#%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98">浏览器缓存</a><ul><li><a href="#%e5%bc%ba%e7%bc%93%e5%ad%98">强缓存</a><ul><li><a href="#%e6%b5%8f%e8%a7%88%e5%99%a8%e6%98%af%e6%a0%b9%e6%8d%ae%e4%bb%80%e4%b9%88%e5%86%b3%e5%ae%9afrom-disk-cache%e4%b8%8efrom-memory-cache%e8%af%a6%e6%83%85">浏览器是根据什么决定「from disk cache」与「from memory cache」详情</a></li></ul></li><li><a href="#%e5%8d%8f%e5%95%86%e7%bc%93%e5%ad%98%e5%af%b9%e6%af%94%e7%bc%93%e5%ad%98">协商缓存（对比缓存）</a></li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http报文首部">http报文首部<a href="#http报文首部" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>http协议的请求报文和响应报文必定包含http首部。首部内容为<strong>服务端和服务器</strong>各自处理<strong>请求和响应提供信息</strong>(开发)。报文分为报文头部、空行和报文主体。但是<strong>报文主体是可选</strong>的，如一个GET请求报文中，就没有报文主体：<br>
<img loading="lazy" alt="报文结构" src="data:image/png;base64,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" title="报文结构" width="427" height="185" class="img_ev3q">  </p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http-请求报文">HTTP 请求报文<a href="#http-请求报文" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><blockquote><p>由方法、URI、HTTP 版本、HTTP 首部字段 等部分构成。
如请求百度首页(chrome查看点击对应header旁边view source查看)</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token constant" style="color:#36acaa">GET</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">HTTP</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Host</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> www</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">baidu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Connection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> keep</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">alive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Pragma</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> no</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Cache</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Control</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> no</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Upgrade</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Insecure</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Requests</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">User</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Agent</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Mozilla</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">5.0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Windows</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10.0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token maybe-class-name">Win64</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> x64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token maybe-class-name">AppleWebKit</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">537.36</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">KHTML</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> like </span><span class="token maybe-class-name">Gecko</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token maybe-class-name">Chrome</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">75.0</span><span class="token number" style="color:#36acaa">.3770</span><span class="token number" style="color:#36acaa">.100</span><span class="token plain"> </span><span class="token maybe-class-name">Safari</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">537.36</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Accept</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> text</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">html</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">application</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">xhtml</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">xml</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">application</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">xml</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">q</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">image</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">webp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">image</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">apng</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">*</span><span class="token comment" style="color:#999988;font-style:italic">/*;q=0.8,application/signed-exchange;v=b3</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">Accept-Encoding: gzip, deflate, br</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">Accept-Language: zh-CN,zh;q=0.9</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http-响应报文">HTTP 响应报文<a href="#http-响应报文" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在响应中，HTTP 报文由 HTTP 版本、状态码（数字和原因短语）、 HTTP 首部字段 3 部分构成。</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token constant" style="color:#36acaa">HTTP</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1.1</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OK</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Bdpagetype</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Bdqid</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xdfcba8bf001bb2e3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Cache</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Control</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Connection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Keep</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Alive</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Content</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Encoding</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> br</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Content</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> text</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Cxy_all</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> baidu</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">eb9b36787b2122ab0315d13731e80a24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token known-class-name class-name">Date</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Tue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">02</span><span class="token plain"> </span><span class="token maybe-class-name">Jul</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2019</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">43</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">45</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">GMT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Expires</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Tue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">02</span><span class="token plain"> </span><span class="token maybe-class-name">Jul</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2019</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">42</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">54</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">GMT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Server</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">BWS</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token known-class-name class-name">Set</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Cookie</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> delPer</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> path</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">/</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> domain</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">baidu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Strict</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Transport</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Security</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> max</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">age</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">172800</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Vary</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Accept</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Encoding</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">X</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Ua</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Compatible</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">IE</span><span class="token operator" style="color:#393A34">=</span><span class="token maybe-class-name">Edge</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">chrome</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Transfer</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Encoding</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> chunked</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http-首部字段作用">HTTP 首部字段作用<a href="#http-首部字段作用" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>HTTP 首部字段是构成 HTTP 报文的要素之一。在客户端与服务器 之间以 HTTP 协议进行通信的过程中，无论是请求还是响应都会使用首 部字段，它能起到传递额外重要信息的作用。
使用首部字段是为了给浏览器和服务器提供报文主体大小、所使用 的语言、认证信息等内容。</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-种http首部字段类型">4 种HTTP首部字段类型<a href="#4-种http首部字段类型" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>通用首部字段（General Header Fields）- 请求报文和响应报文两方都会使用的首部。</li><li>请求首部字段（Request Header Fields） - 从客户端向服务器端发送请求报文时使用的首部。补充了请求的附 加内容、客户端信息、响应内容相关优先级等信息。</li><li>响应首部字段（Response Header Fields） - 从服务器端向客户端返回响应报文时使用的首部。补充了响应的附 加内容，也会要求客户端附加额外的内容信息。</li><li>实体首部字段（Entity Header Fields） - 针对请求报文和响应报文的实体部分使用的首部。补充了资源内容 更新时间等与实体有关的信息。</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="chrome响应首部出现provisional-headers-are-shown">Chrome响应首部出现Provisional headers are shown<a href="#chrome响应首部出现provisional-headers-are-shown" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ol><li>强缓存from disk cache或者from memory cache。清空缓存操作： 调试模式打开-&gt;刷新按钮右键-&gt;清空缓存并硬性重新加载 或者 ctrl+F5</li><li>服务器出错或者超时，没有真正的返回</li><li>请求被浏览器插件拦截</li><li>跨域，请求被浏览器拦截  </li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http首部字段表">http首部字段表<a href="#http首部字段表" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>注：个人理解-前缀带※可能会涉及到性能优化方面  </p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="通用首部字段">通用首部字段<a href="#通用首部字段" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><table><thead><tr><th>首部字段名</th><th>说明</th></tr></thead><tbody><tr><td><strong>※Cache-Control</strong></td><td>控制缓存的行为</td></tr><tr><td>Connection</td><td>逐跳首部、连接的管理</td></tr><tr><td>Date</td><td>创建报文的日期时间</td></tr><tr><td>Pragma</td><td>报文指令(是 HTTP/1.1 之前版本的历史遗留字段，仅作为与 HTTP/1.0 的向后兼容而定义。 只用在客户端发送的请求中。客户端会要求所有的中间服务器不返回缓存的资源。)</td></tr><tr><td>Trailer</td><td>报文末端的首部一览 Transfer-Encoding 指定报文主体的传输编码方式(事先说明在报文主体后记录了哪些首部字段。该首部字段可应用在 HTTP/1.1 版本分块传输编码/<em>上传</em>时。)</td></tr><tr><td>Upgrade</td><td>升级为其他协议( 用于检测 HTTP 协议及其他协议是否可使用更高 的版本进行通信)</td></tr><tr><td>Via</td><td>代理服务器的相关信息(追踪客户端与服务器之间的请求和响应报 文的传输路径。) 每经过一层转发会在Via首部附加信息,Via 首部是为了追踪传输路径，所以经常会和 TRACE 方法一起使 用。</td></tr><tr><td>Warning</td><td>错误通知,通常会告知用户一些与缓存相关的问题的警告。 <code>Warning: [警告码][警告的主机:端口号]“[警告内容]”([日期时间]) </code></td></tr><tr><td>Transfer-Encoding</td><td>规定了传输报文主体时采用的编码 方式。HTTP/1.1 的传输编码方式仅对分块传输编码有效。</td></tr></tbody></table><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="请求首部字段">请求首部字段<a href="#请求首部字段" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><table><thead><tr><th>首部字段名</th><th>说明</th></tr></thead><tbody><tr><td>Accept</td><td>用户代理可处理的媒体类型,可一次性指定多种字符集,用权重 q 值来表示相对优先级。</td></tr><tr><td>Accept-Charset</td><td>优先的字符集 (用来通知服务器用户代理支持的字符集 及字符集的相对优先顺序 utf-8)</td></tr><tr><td><strong>※Accept-Encoding</strong></td><td>优先的内容编码(性能优化)</td></tr><tr><td>Accept-Language</td><td>优先的语言。用来告知服务器用户代理能够处理的自 然语言集（指中文或英文等），以及自然语言集的相对优先级。可一次 指定多种自然语言集</td></tr><tr><td>Authorization</td><td>Web认证信息 (来告知服务器，用户代理的认证信息 （证书值）)</td></tr><tr><td>Expect</td><td>期待服务器的特定行为</td></tr><tr><td>From</td><td>用户的电子邮箱地址 (为了显示搜索引擎等用户代理的负责人的 电子邮件联系方式)</td></tr><tr><td><strong>Host</strong></td><td>Host 会告知服务器，请求的资源所处的互联网主机名和端口号。(HTTP/1.1唯一一个<strong>必须被包含在请求内</strong>的首部字段,若服务器未设定主机名，那直接发送一个空值即可)</td></tr><tr><td><strong>※If-Match</strong></td><td>比较实体标记（ETag）</td></tr><tr><td><strong>※If-Modified-Since</strong></td><td>比较资源的更新时间</td></tr><tr><td><strong>※If-None-Match</strong></td><td>比较实体标记（与If-Match相反）</td></tr><tr><td><strong>※If-Range</strong></td><td>资源未更新时发送实体Byte的范围请求</td></tr><tr><td><strong>※If-Unmodified-Since</strong></td><td>比较资源的更新时间（与If-Modified-Since相反）</td></tr><tr><td>Max-Forwards</td><td>最大传输逐跳数(服务器在往下一个服务器转发请求之前，会将 Max-Forwards 的 值减 1 后重新赋值)</td></tr><tr><td>Proxy-Authorization</td><td>代理服务器要求客户端的认证信息</td></tr><tr><td>Range</td><td>实体的字节范围请求</td></tr><tr><td>Referer</td><td>告知服务器请求的原始资源的 URI (出于安全性的考虑时，也可以不发送该首部 字段。 )</td></tr><tr><td>TE</td><td>传输编码的优先级,User-Agent HTTP 客户端程序的信息 (告知服务器客户端能够处理响应的传输编码方式及 相对优先级。它<em>和首部字段 Accept-Encoding 的功能很相像</em>，但是用于 传输编码。)</td></tr><tr><td>User-Agent</td><td>创建请求的浏览器和用户代理名称等信息 传达给服务器</td></tr><tr><td><strong>cookie</strong></td><td>用于保持用户状态与服务端通信  (服务器接收到的Cookie信息 )</td></tr></tbody></table><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="响应首部字段">响应首部字段<a href="#响应首部字段" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><table><thead><tr><th>首部字段名</th><th>说明</th></tr></thead><tbody><tr><td>Accept-Ranges</td><td>是否接受字节范围请求(告知客户端服务器是否能处理范围 请求，以指定获取服务器端某个部分的资源。 )</td></tr><tr><td><strong>Age</strong></td><td>推算资源创建经过时间(告知客户端，源服务器在多久前创建了响应。字段 值的单位为秒。)</td></tr><tr><td><strong>※ETag</strong></td><td>资源的匹配信息</td></tr><tr><td><strong>Location</strong></td><td>令客户端重定向至指定URI</td></tr><tr><td>Proxy-Authenticate</td><td>代理服务器对客户端的认证信息(把由代理服务器所要求的认证信息 发送给客户端。)</td></tr><tr><td>Retry-After</td><td>告知客户端应该在多久之后再次发送请求。主要配合状态码 503 Service Unavailable 响应，或 3xx Redirect 响应一起使用。(字段值可以指定为具体的日期时间（Wed, 04 Jul 2012 06：34：24 GMT 等格式），也可以是创建响应后的秒数。</td></tr><tr><td>)</td><td></td></tr><tr><td>Server</td><td>告知客户端当前服务器上安装的 HTTP 服务器应用 程序的信息。不单单会标出服务器上的软件应用名称，还有可能包括版 本号和安装时启用的可选项。 (<code>Server: Apache/2.2.6 (Unix) PHP/5.2.5</code>)</td></tr><tr><td><strong>※Vary</strong></td><td>代理服务器缓存的管理信息</td></tr><tr><td>WWW-Authenticate</td><td>服务器对客户端的认证信息 (会告知客户 端适用于访问请求 URI 所指定资源的认证方案（Basic 或是 Digest）和 带参数提示的质询（challenge）。状态码 401 Unauthorized 响应中，肯定 带有首部字段 WWW-Authenticate。)</td></tr><tr><td><strong>Set-Cookie</strong></td><td>操作客户端cookie (开始状态管理所使用的Cookie)</td></tr></tbody></table><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="实体首部字段">实体首部字段<a href="#实体首部字段" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><table><thead><tr><th>首部字段名</th><th>说明</th></tr></thead><tbody><tr><td>Allow</td><td>资源可支持的HTTP方法(通知客户端能够支持 Request-URI 指定资源的 所有 HTTP 方法。当服务器接收到不支持的 HTTP 方法时，会以状态码 405 Method Not Allowed 作为响应返回。与此同时，还会把所有能支持 的 HTTP 方法写入首部字段 Allow 后返回。</td></tr><tr><td>)</td><td></td></tr><tr><td>Content-Encoding</td><td>实体主体适用的编码方式 (告知客户端服务器对实体的主体部分 选用的内容编码方式。内容编码是指在不丢失实体信息的前提下所进行 的压缩。</td></tr><tr><td>)</td><td></td></tr><tr><td>Content-Language</td><td>实体主体的自然语言</td></tr><tr><td>Content-Length</td><td>实体主体的大小（单位 ：字节）</td></tr><tr><td>Content-Location</td><td>替代对应资源的URI (给出与报文主体部分相对应的 URI。和 首部字段 Location 不同，Content-Location 表示的是报文主体返回资源 对应的 URI。 )</td></tr><tr><td>Content-MD5</td><td>实体主体的报文摘要 (检查报文主体在传输过程中是否保持完整，以及确认传输到达)</td></tr><tr><td>Content-Range</td><td>实体主体的位置范围 (告 知客户端作为响应返回的实体的哪个部分符合范围请求)</td></tr><tr><td><strong>Content-Type</strong></td><td>实体主体的媒体类型</td></tr><tr><td><strong>※Expires</strong></td><td>实体主体过期的日期时间</td></tr><tr><td><strong>※Last-Modified</strong></td><td>资源的最后修改日期时间</td></tr></tbody></table><blockquote><p>在 HTTP 协议通信交互中使用到的首部字段，不限于 RFC2616 中 定义的 47 种首部字段。还有 Cookie、Set-Cookie 和 Content-Disposition 等在其他 RFC 中定义的首部字段，它们的使用频率也很高。 这些非正式的首部字段统一归纳在 RFC4229 HTTP Header Field Registrations中。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="端到端首部和逐跳首部">端到端首部和逐跳首部<a href="#端到端首部和逐跳首部" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>HTTP 首部字段将定义成缓存代理和非缓存代理的行为，分成 2 种 类型。</p><ul><li>端到端首部（End-to-end Header）
分在此类别中的首部会转发给请求 / 响应对应的最终接收目标，且 必须保存在由缓存生成的响应中，另外规定<strong>它必须被转发</strong>。</li><li>逐跳首部（Hop-by-hop Header）
分在此类别中的首部只对单次转发有效，会因通过缓存或代理而不 再转发。HTTP/1.1 和之后版本中，如果要使用 hop-by-hop 首部， 需提供 Connection首部字段。</li></ul></blockquote><p><em>HTTP/1.1 中的逐跳首部字段</em>。除这 8 个首部字段之外， 其他所有字段都属于端到端首部。</p><ul><li>Connection </li><li>Keep-Alive </li><li>Proxy-Authenticate </li><li>Proxy-Authorization </li><li>Trailer </li><li>TE </li><li>Transfer-Encoding </li><li>Upgrade</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http11通用首部字段详解">HTTP/1.1通用首部字段详解<a href="#http11通用首部字段详解" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>请求报文和响应报文双方都会使用的首部(我理解为请求和响应都包含的字段信息)<br>
<strong>理解前提-是客户端请求服务器资源会从cdn获取</strong></p><blockquote><p>指令的参数是可选的，多个指令之间通过“,”分隔</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cache-control">Cache-Control<a href="#cache-control" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>通过指定首部字段Cache-Control的指令，就能操作缓存的工作机制。</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">Cache</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Control</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> max</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">age</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> no</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cache</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>请求指令   </li></ul></blockquote><table><thead><tr><th>指令</th><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>no-cache</td><td>无</td><td>强制向源服务器再次验证</td></tr><tr><td>no-store</td><td>无</td><td>不缓存请求或响应的任何内容</td></tr><tr><td>max-age = <!-- -->[ 秒]</td><td>必需</td><td>响应的最大Age值</td></tr><tr><td>max-stale( = <!-- -->[ 秒]<!-- -->)</td><td>可省略</td><td>接收已过期的响应</td></tr><tr><td>min-fresh = <!-- -->[ 秒]</td><td>必需</td><td>期望在指定时间内的响应仍有效</td></tr><tr><td>no-transform</td><td>无</td><td>代理不可更改媒体类型</td></tr><tr><td>only-if-cached</td><td>无</td><td>从缓存获取资源</td></tr><tr><td>cache-extension</td><td>-</td><td>新指令标记（token）</td></tr></tbody></table><ul><li>缓存响应指令   </li></ul><table><thead><tr><th>指令</th><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>public</td><td>无</td><td>可向任意方提供响应的缓存</td></tr><tr><td>private</td><td>可省略</td><td>仅向特定用户返回响应</td></tr><tr><td>no-cache</td><td>可省略</td><td>缓存前必须先确认其有效性</td></tr><tr><td>no-store</td><td>无</td><td>不缓存请求或响应的任何内容</td></tr><tr><td>no-transform</td><td>无</td><td>代理不可更改媒体类型</td></tr><tr><td>must-revalidate</td><td>无</td><td>可缓存但必须再向源服务器进行确认</td></tr><tr><td>proxy-revalidate</td><td>无</td><td>要求中间缓存服务器对缓存的响应有效性再进行确认</td></tr><tr><td>max-age = <!-- -->[ 秒]</td><td>必需</td><td>响应的最大Age值</td></tr><tr><td>s-maxage = <!-- -->[ 秒]</td><td>必需</td><td>公共缓存服务器响应的最大Age值</td></tr><tr><td>cache-extension</td><td>-</td><td>新指令标记（token）</td></tr></tbody></table><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="表示是否能缓存的指令">表示是否能缓存的指令<a href="#表示是否能缓存的指令" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><ul><li><code>public</code>-当指定使用 public 指令时，则明确表明其他用户也可利用缓存。</li><li><code>private</code>-缓存服务器会对该特定用户提供资源缓存的服务，对于其他用户发 送过来的请求，代理服务器则不会返回缓存。</li><li><code>no-cache</code>-目的是为了防止从缓存中返回过期的资源。 <blockquote><p>客户端发送的请求中如果包含no-cache指令，则表示客户端将不会 接收缓存过的响应。于是，“中间”的缓存服务器必须把客户端请求转发 给源服务器。<br>
<!-- -->如果服务器返回的响应中包含no-cache指令，那么缓存服务器不能 对资源进行缓存。源服务器以后也将不再对缓存服务器请求中提出的资 源有效性进行确认，且禁止其对响应资源进行缓存操作。<br>
<strong>事实上no-cache代表不 缓存过期的资源，缓存会向源服务器进行有效期确认后处理资源</strong></p></blockquote></li></ul><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">Cache</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Control</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> no</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cache</span><span class="token operator" style="color:#393A34">=</span><span class="token maybe-class-name">Location</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">由服务器返回的响应中，若报文首部字段 </span><span class="token maybe-class-name">Cache</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Control</span><span class="token plain"> 中对 nocache 字段名具体指定参数值，那么客户端在接收到这个被指定参数值 的首部字段对应的响应报文后，就不能使用缓存。换言之，无参数值的 首部字段可以使用缓存。只能在响应指令中指定该参数。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="控制可执行缓存的对象的指令">控制可执行缓存的对象的指令<a href="#控制可执行缓存的对象的指令" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><ul><li><code>no-store</code>-规定缓存不能在本地存储请求或响应的任一部分。当使用 no-store 指令时，暗示请求（和对应的响应）或响应中包含机密信息。 </li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="指定缓存期限和认证的指令">指定缓存期限和认证的指令<a href="#指定缓存期限和认证的指令" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><ul><li><code>max-age</code>-当客户端发送的请求中包含 max-age 指令时，如果判定缓存资源的缓存时间数值比指定时间的数值更小，那么客户端就接收缓存的资源。 另外，当指定 max-age 值为 0，那么缓存服务器通常需要将请求转发给 源服务器。 <blockquote><p>应用 HTTP/1.1 版本的缓存服务器遇到同时存在 Expires 首部字段的 情况时，<strong>会优先处理 max-age 指令</strong>，而忽略掉 Expires 首部字段。而 HTTP/1.0 版本的缓存服务器的情况却相反，max-age指令会被忽略掉。</p></blockquote></li><li><code>s-maxage</code>-功能和 max-age 指令的相同,对于向同一用户重复返回响应的服务器来说，这个指令没有任何作用。<blockquote><p>当使用 s-maxage 指令后，则<strong>直接忽略</strong>对 Expires 首部字段及 max-age指令的处理。</p></blockquote></li><li><code>min-fresh</code>-要求缓存服务器返回至少还未过指定时间的缓存资源,<code>Cache-Control: min-fresh=60（单位 ：秒）</code>:在这 60 秒以内如果有超过有 效期限的资源都无法作为响应返回。</li><li><code>max-stale</code>-指示缓存资源即使过期也照常接收。如果指令未指定参数值，那么无论经过多久，客户端都会接收响应； 如果指令中指定了具体数值，那么即使过期，只要仍处于max-stale指定 的时间内，仍旧会被客户端接收。</li><li><code>only-if-cached</code>-缓存服务器不重新 加载响应，也不会再次确认资源有效性。若发生请求缓存服务器的本地 缓存无响应，则返回状态码 504 Gateway Timeout。</li><li><code>must-revalidate</code>-代理会向源服务器再次验证即将返回的 响应缓存目前是否仍然有效。 </li><li><code>proxy-revalidate</code>-所有的缓存服务器在接收到客户端带有该 指令的请求返回响应之前，必须再次验证缓存的有效性。</li><li><code>no-transform</code>-无论是在请求还是响应中，缓存都不能 改变实体主体的媒体类型。<strong>可防止缓存或代理压缩图片等类似操作</strong>  </li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cache-control-扩展">Cache-Control 扩展<a href="#cache-control-扩展" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>cache-extension token</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">Cache</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Control</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> community</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;UCI&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过 cache-extension标记（token），可以扩展 Cache-Control首部字 段内的指令。<br>
<!-- -->如上例，Cache-Control首部字段本身没有 community这个指令。借 助 extension tokens 实现了该指令的添加。如果缓存服务器不能理解 community 这个新指令，就会直接忽略。因此，extension tokens 仅对能 理解它的缓存服务器来说是有意义的。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="connection">Connection<a href="#connection" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>控制不再转发给代理的首部字段<br>在客户端发送请求和服务器返回响应内，使用 Connection 首部字 段，可控制不再转发给代理的首部字段（即 Hop-by-hop 首部）。</li><li>管理持久连接<a href="https://cloud.tencent.com/developer/article/1120189" target="_blank" rel="noopener noreferrer">概念</a>
HTTP/1.1 版本的默认连接都是持久连接。为此，客户端会在持久 连接上连续发送请求。当服务器端想明确断开连接时，则指定 Connection首部字段的值为 Close。如果想在旧版本的 HTTP 协议上维持持续连接，则需要指定 Connection 首部字段的值为 Keep-Alive。</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="upgrade">Upgrade<a href="#upgrade" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>用于检测 HTTP 协议及其他协议是否可使用更高 的版本进行通信，其参数值可以用来指定一个完全不同的通信协议。</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">GET</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">htm</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">HTTP</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1.1</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Upgrade</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TLS</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Connection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Upgrade</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">response</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">HTTP</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1.1</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token plain"> </span><span class="token maybe-class-name">Switching</span><span class="token plain"> </span><span class="token maybe-class-name">Protocols</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Upgrade</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TLS</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">HTTP</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1.1</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">Connection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Upgrade</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">首部字段 </span><span class="token maybe-class-name">Upgrade</span><span class="token plain"> 指定的值为 </span><span class="token constant" style="color:#36acaa">TLS</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain">。请注意此处 两个字段首部字段的对应关系，Connection 的值被指定为 </span><span class="token maybe-class-name">Upgrade。</span><span class="token plain"> </span><span class="token maybe-class-name">Upgrade</span><span class="token plain"> 首部字段产生作用的 </span><span class="token maybe-class-name">Upgrade</span><span class="token plain"> 对象仅限于客户端和邻接服务器之间。因此，使用首部字段 </span><span class="token maybe-class-name">Upgrade</span><span class="token plain"> 时，还需要额外指定 </span><span class="token maybe-class-name">Connection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Upgrade。</span><span class="token plain"> 对于附有首部字段 </span><span class="token maybe-class-name">Upgrade</span><span class="token plain"> 的请求，服务器可用 </span><span class="token number" style="color:#36acaa">101</span><span class="token plain"> </span><span class="token maybe-class-name">Switching</span><span class="token plain"> </span><span class="token maybe-class-name">Protocols</span><span class="token plain"> 状态码作为响应返回。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="请求首部字段详解">请求首部字段详解<a href="#请求首部字段详解" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>从客户端往服务器端发送请求报文中所使用的字 段，用于补充请求的附加信息、客户端信息、对响应内容相关的优先级 等内容。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="accept">Accept<a href="#accept" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>通知服务器，用户代理能够处理的媒体类型及媒体类型的相对优先级。可使用type/subtype这种形式，一次指定多种媒体类型。<br>
<code>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</code>  </p><ul><li>文本文件 text/html, text/plain, text/css ... application/xhtml+xml, application/xml ... </li><li>图片文件 image/jpeg, image/gif, image/png ... </li><li>视频文件 video/mpeg, video/quicktime ... </li><li>应用程序使用的二进制文件 application/octet-stream, application/zip ...</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="accept-encoding">Accept-Encoding<a href="#accept-encoding" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>用来告知服务器用户代理支持的内容编 码及内容编码的优先级顺序。可一次性指定多种内容编码。 采用权重 q 值来表示相对优先级，这点与首部字段 Accept 相同。 </p><ul><li><code>gzip</code>-由文件压缩程序 gzip（GNU zip）生成的编码格式（RFC1952）， 采用 Lempel-Ziv 算法（LZ77）及 32 位循环冗余校验（Cyclic Redundancy Check，通称CRC）。 </li><li><code>compress</code>-由 UNIX 文件压缩程序 compress 生成的编码格式，采用 LempelZiv-Welch 算法（LZW）。 </li><li><code>deflate</code>-组合使用zlib格式（RFC1950）及由deflate压缩算法（RFC1951） 生成的编码格式。</li><li><code>identity</code>-不执行压缩或不会变化的默认编码格式</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="if-xxxxx-条件请求">If-XXXXX (条件请求)<a href="#if-xxxxx-条件请求" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><blockquote><p>形如 If-xxx 这种样式的请求首部字段，都可称为条件请求。服 务器接收到附带条件的请求后，只有判断指定条件为真时，才会执行请求</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="if-match">If-Match<a href="#if-match" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>它会告知服务器匹配资源所用的实体标记（ETag）值。这时的服务器无法使用弱 ETag 值。
服务器会比对If-Match的字段值和资源的ETag值，仅当<strong>两者一致时，才会执行请求</strong>。反之，则返回状态码412 Precondition Failed的响应。<br>
<!-- -->还可以使用星号（*）指定 If-Match 的字段值。针对这种情况，服 务器将会忽略 ETag 的值，只要资源存在就处理请求。</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="if-modified-since">If-Modified-Since<a href="#if-modified-since" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>告知服务器若 If-Modified-Since 字段值<em>早于资源的更新时间能处理该请求</em>，而在指定 If-Modified-Since 字段值的日期时间之后，如果请求的资源都没有过更新，则返回状态码 304 Not Modified 的响应。 </p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="if-none-match">If-None-Match<a href="#if-none-match" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>用于指定 If-None-Match 字段值的实体标记（ETag） 值<strong>与请求资源的 ETag 不一致时告知服务器处理</strong>该请求。 在 GET 或 HEAD 方法中使用首部字段 If-None-Match 可获取最新 的资源。因此，这与使用首部字段 If-Modified-Since时有些类似。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="if-range">If-Range<a href="#if-range" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>告知服务器若指定的 If-Range 字段值（ETag 值或者时间）和请求资源的 ETag 值或时间相一 致时，则作为范围请求处理。反之，则返回全部资源。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="if-unmodified-since">If-Unmodified-Since<a href="#if-unmodified-since" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>指定的请求资源只有在字段值内指 定的日期时间之后，未发生更新的情况下，才能处理请求。如果在指定日期时间后发生了更新，则以状态码 412 Precondition Failed 作为响 应返回。<em>与If-Modified-Since相反</em>。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="range">Range<a href="#range" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>接收到附带 Range 首部字段请求的服务器，会在处理请求之后返回 状态码为 206 Partial Content 的响应。无法处理该范围请求时，则会返 回状态码 200 OK 的响应及全部资源</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">Range</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> bytes</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5001</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">10000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">对于只需获取部分资源的范围请求，包含首部字段 </span><span class="token maybe-class-name">Range</span><span class="token plain"> 即可告知 服务器资源的指定范围。上面的示例表示请求获取从第 </span><span class="token number" style="color:#36acaa">5001</span><span class="token plain"> 字节至第 </span><span class="token number" style="color:#36acaa">10000</span><span class="token plain"> 字节的资源。 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cookie">Cookie<a href="#cookie" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>告知服务器，当客户端想获得 HTTP 状态管理 支持时，就会在请求中包含从服务器接收到的 Cookie。接收到多个 Cookie 时，同样可以以多个 Cookie 形式发送。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="响应首部字段详解">响应首部字段详解<a href="#响应首部字段详解" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="etag">ETag<a href="#etag" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>告知客户端实体标识。它是一种可将资源以字符 串形式做唯一性标识的方式。服务器会为每份资源分配对应的 ETag 值。 <em>当资源更新时，ETag 值也需要更新</em>。生成 ETag 值没有统一的算法规则，仅仅是由服务器来分配。</p><blockquote><p>资源被缓存时，就会被分配唯一性标识。例如，当使用中文版的浏 览器访问 http ：//<a href="http://www.google.com/" target="_blank" rel="noopener noreferrer">www.google.com/</a> 时，就会返回中文版对应的资源，而 使用英文版的浏览器访问时，则会返回英文版对应的资源。两者的 URI 是相同的，所以仅凭 URI 指定缓存的资源是相当困难的。若在下载过 程中出现连接中断、再连接的情况，都会依照 ETag 值来指定资源。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="强etag-值">强ETag 值<a href="#强etag-值" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>强 ETag 值，不论实体发生多么细微的变化都会改变其值。<br>
<code>ETag: &quot;usagi-1234&quot;</code></p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="弱etag-值">弱ETag 值<a href="#弱etag-值" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>弱 ETag 值只用于提示资源是否相同。只有资源发生了根本改变，产 生差异时才会改变ETag值。这时，会在字段值最开始处附加W/。
<code>ETag:  W/&quot;usagi-1234&quot;</code></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="location">Location<a href="#location" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>可以将响应接收方引导至某个与请求 URI 位置不同的资源。 一般会配合 3xx ：Redirection 的响应，提供重定向的 URI。几乎所有的浏览器在接收到包含首部字段 Location 的响应后，都会 强制性地尝试对已提示的重定向资源的访问。(注意:<strong>ajax请求响应不会发生重定向</strong>)</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="vary">Vary<a href="#vary" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>当代理服务器接收到带有 Vary 首部字段指定获取资源的请求时，如果使用 的 Accept-Language 字段的值相同，那么就直接从缓存返回响应。反之， 则需要先从源服务器端获取资源后才能作为响应返回。<br>
<!-- -->可对缓存进行控制。源服务器会向代理服务器传达 关于本地缓存使用方法的命令。</p><blockquote><p>从代理服务器接收到源服务器返回包含 Vary 指定项的响应之后， 若再要进行缓存，仅对请求中含有相同 Vary 指定首部字段的请求返回 缓存。即使对相同资源发起请求，但由于 Vary 指定的首部字段不相同， 因此必须要从源服务器重新获取资源。</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set-cookie">Set-Cookie<a href="#set-cookie" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>当服务器准备开始管理客户端的状态时，会事先告知各种信息。 下面的表格列举了 Set-Cookie 的字段值。  </p><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>NAME=VALUE</td><td>赋予Cookie的名称和其值（必需项）</td></tr><tr><td>expires=DATE</td><td>Cookie的有效期（若不明确指定则默认为浏览器关闭前为止）</td></tr><tr><td>path=PATH</td><td>将服务器上的文件目录作为Cookie的适用对象（若不指定则 默认为文档所在的文件目录）</td></tr><tr><td>domain=域名</td><td>作为Cookie适用对象的域名（ 若不指定则默认为创建Cookie 的服务器的域名）</td></tr><tr><td>Secure</td><td>仅在HTTPS安全通信时才会发送Cookie</td></tr><tr><td>HttpOnly</td><td>加以限制，使Cookie不能被JavaScript脚本访问</td></tr></tbody></table><ul><li><code>secure</code> - 于限制 Web 页面仅在 HTTPS 安全连接时， 才可以发送 Cookie</li><li><code>HttpOnly</code> - Cookie 的 HttpOnly 属性是 Cookie 的扩展功能，它使 JavaScript 脚 本无法获得 Cookie。其主要目的为防止跨站脚本攻击（Cross-site scripting，XSS）对 Cookie 的信息窃取。</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="实体首部字段详解">实体首部字段详解<a href="#实体首部字段详解" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="expires">Expires<a href="#expires" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p><code>Expires: Wed, 04 Jul 2012 08:26:05 GMT</code>
会将资源失效的日期告知客户端。缓存服务器在 接收到含有首部字段 Expires 的响应后，会以缓存来应答请求，在Expires 字段值指定的时间之前，响应的副本会一直被保存。当超过 指定的时间后，缓存服务器在请求发送过来时，会转向源服务器请求 资源。
源服务器不希望缓存服务器对资源缓存时，最好在 Expires 字段内 写入与首部字段 Date 相同的时间值。  </p><blockquote><p>但是，当首部字段 Cache-Control 有指定 max-age 指令时，比起首 部字段 Expires，会优先处理 max-age指令。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="last-modified">Last-Modified<a href="#last-modified" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>指明资源最终修改的时间。一般来说，这 个值就是 Request-URI 指定资源被修改的时间。但类似使用 CGI 脚本进 行动态数据处理时，该值有可能会变成数据最终修改时的时间。</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="其他首部字段">其他首部字段<a href="#其他首部字段" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>HTTP 首部字段是可以自行扩展的。所以在 Web 服务器和浏览器的 应用上，会出现各种非标准的首部字段。 </p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="x-frame-options">X-Frame-Options<a href="#x-frame-options" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>首部字段 X-Frame-Options 属于 HTTP 响应首部，用于控制网站内 容在其他 Web 网站的 Frame 标签内的显示问题。其主要目的是为了防 止点击劫持（clickjacking）攻击。<br>
<!-- -->x-frame-option 控制是否允许被跨域资源iframe引入</p><ul><li><code>DENY</code> ：拒绝 </li><li><code>SAMEORIGIN</code> ：仅同源域名下的页面（Top-level-browsing-context） 匹配时许可。</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="x-xss-protection">X-XSS-Protection<a href="#x-xss-protection" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>是针对跨站脚 本攻击（XSS）的一种对策，用于控制浏览器 XSS 防护机制的开关。<br>
<!-- -->XSS攻击：其原理是攻击者向有XSS漏洞的网站中输入(传入)恶意的HTML或者JS代码，当其它用户浏览该网站时，这段HTML代码会自动执行，从而达到攻击的目的</p><ul><li><code>0</code> ：将 XSS 过滤设置成无效状态 </li><li><code>1</code> ：将 XSS 过滤设置成有效状态</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="dnt">DNT<a href="#dnt" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Do Not Track 的简称，意为拒绝个人信息被收集，是表示拒绝被精准广告追踪的一 种方法。</p><ul><li><code>0</code> ：同意被追踪 </li><li><code>1</code> ：拒绝被追踪</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="p3p">P3P<a href="#p3p" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>通过利用 P3P（The Platform for Privacy Preferences，在线隐私偏好平台）技术，可以让 Web 网站上 的个人隐私变成一种仅供程序可理解的形式，以达到保护用户隐私的 目的。 </p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="部分web安全常识">部分web安全常识<a href="#部分web安全常识" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ol><li><a href="https://baike.baidu.com/item/%E7%82%B9%E5%87%BB%E5%8A%AB%E6%8C%81/6742958?fr=aladdin" target="_blank" rel="noopener noreferrer">点击劫持攻击</a></li><li><a href="https://baike.baidu.com/item/XSS%E6%94%BB%E5%87%BB/954065?fr=aladdin" target="_blank" rel="noopener noreferrer">XSS攻击</a>，<a href="https://www.cnblogs.com/hellojesson/p/6386002.html" target="_blank" rel="noopener noreferrer">博客</a></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="浏览器缓存">浏览器缓存<a href="#浏览器缓存" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p><a href="https://www.jianshu.com/p/4f07740d68e4" target="_blank" rel="noopener noreferrer">参考</a><br>
<a href="https://blog.csdn.net/zl399615007/article/details/84534884" target="_blank" rel="noopener noreferrer">扩展</a>    </p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="强缓存">强缓存<a href="#强缓存" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>强缓存在客户端和服务器端都会存在。   </p><ul><li>客户端：客户端在请求资源前，会检查上一次该资源响应头的Cache-Control字段，如果该字段的值为max-age=time(大于0的毫秒数)，如果该资源缓存的时间没有过这个时间值，则直接使用本地的缓存，而不像服务器发请求。     </li><li>服务器端：服务器端在接收到一个请求后，如果该请求的头部Cache-Control字段的值为max-age=time(大于0的毫秒数)，如果距离上一次返回资源的时间小于这个毫秒数，那么服务器不会读取新的资源，而是直接返回304，告知客户端使用自己本地上次缓存的资源即可。      <blockquote><p>注：这两种情况，其实归根结底最后都是使用的客户端本地的资源，服务器没有返回资源实体。这样的好处是节省请求次数或者请求流量，但缺点是，如果在max-age时间内服务器资源有更新，客户端无法得到最新的服务器资源。此时可以通过Ctrl+F5强制刷新(其实就是设置一个Cache-Control:no-cache的请求头)，获得最新的服务器资源。   </p></blockquote></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="浏览器是根据什么决定from-disk-cache与from-memory-cache详情">浏览器是根据什么决定「from disk cache」与「from memory cache」<a href="https://www.zhihu.com/question/64201378/answer/217831630" target="_blank" rel="noopener noreferrer">详情</a><a href="#浏览器是根据什么决定from-disk-cache与from-memory-cache详情" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>内存缓存的特点 快(读取快) 时效性(进程死，他也死)</p><ol><li>(以图片为例):访问-&gt; 200 -&gt; 退出浏览器再进来-&gt; 200(from disk cache) -&gt; 刷新 -&gt; 200(from memory cache)
总结: 会不会是chrome很聪明的判断既然已经从disk拿来了， 第二次就内存拿吧 快。（笑哭)第二个现象</li><li>(以图片为例):只要图片是base64 我看都是from memroy cache。
总结: 解析渲染图片这么费劲的事情，还是做一次然后放到内存吧。 用的时候直接拿</li><li>(以js css为例):个人在做静态测试的发现，大型的js css文件都是直接disk cache
总结: chrome会不会说 我擦 你这么大 太JB占地方了。 你就去硬盘里呆着吧。 慢就慢点吧。</li><li>隐私模式下，几乎都是 from memroy cache.
总结: 隐私模式 是吧。 我不能暴露你东西。还是放到内存吧。 你关，我死。  </li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="协商缓存对比缓存">协商缓存（对比缓存）<a href="#协商缓存对比缓存" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>对比缓存值存在于服务器端。<br>
<!-- -->在没有走强缓存逻辑的情况下，服务器端会进行Last-Modified和Etag的校验，如果校验发现资源未更新，则会返回304，否则会返回新的资源实体。  </p><ul><li>ETag和If-None-Match是一对  </li><li>Last-Modified和If-Modified-Since是一对    </li></ul><p><img loading="lazy" alt="浏览器请求资源" src="/assets/images/huancun-63d9065b4f33aef0dff47d4fdb4a8efc.jpg" title="浏览器请求资源" width="824" height="968" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/justwe7/justwe7.github.io/blob/feature/docs/http/http报文-首部.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/http/http报文-概念状态码"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">http报文-概念状态码</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/http/web及网络基础"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">web及网络基础</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#http报文首部" class="table-of-contents__link toc-highlight">http报文首部</a><ul><li><a href="#http-请求报文" class="table-of-contents__link toc-highlight">HTTP 请求报文</a></li><li><a href="#4-种http首部字段类型" class="table-of-contents__link toc-highlight">4 种HTTP首部字段类型</a></li><li><a href="#chrome响应首部出现provisional-headers-are-shown" class="table-of-contents__link toc-highlight">Chrome响应首部出现Provisional headers are shown</a></li></ul></li><li><a href="#http首部字段表" class="table-of-contents__link toc-highlight">http首部字段表</a><ul><li><a href="#通用首部字段" class="table-of-contents__link toc-highlight">通用首部字段</a></li><li><a href="#请求首部字段" class="table-of-contents__link toc-highlight">请求首部字段</a></li><li><a href="#响应首部字段" class="table-of-contents__link toc-highlight">响应首部字段</a></li><li><a href="#实体首部字段" class="table-of-contents__link toc-highlight">实体首部字段</a></li></ul></li><li><a href="#http11通用首部字段详解" class="table-of-contents__link toc-highlight">HTTP/1.1通用首部字段详解</a><ul><li><a href="#表示是否能缓存的指令" class="table-of-contents__link toc-highlight">表示是否能缓存的指令</a></li><li><a href="#控制可执行缓存的对象的指令" class="table-of-contents__link toc-highlight">控制可执行缓存的对象的指令</a></li><li><a href="#指定缓存期限和认证的指令" class="table-of-contents__link toc-highlight">指定缓存期限和认证的指令</a></li><li><a href="#cache-control-扩展" class="table-of-contents__link toc-highlight">Cache-Control 扩展</a></li><li><a href="#connection" class="table-of-contents__link toc-highlight">Connection</a></li><li><a href="#upgrade" class="table-of-contents__link toc-highlight">Upgrade</a></li></ul></li><li><a href="#请求首部字段详解" class="table-of-contents__link toc-highlight">请求首部字段详解</a><ul><li><a href="#accept" class="table-of-contents__link toc-highlight">Accept</a></li><li><a href="#accept-encoding" class="table-of-contents__link toc-highlight">Accept-Encoding</a></li><li><a href="#if-xxxxx-条件请求" class="table-of-contents__link toc-highlight">If-XXXXX (条件请求)</a><ul><li><a href="#if-modified-since" class="table-of-contents__link toc-highlight">If-Modified-Since</a></li><li><a href="#if-none-match" class="table-of-contents__link toc-highlight">If-None-Match</a></li><li><a href="#if-range" class="table-of-contents__link toc-highlight">If-Range</a></li><li><a href="#if-unmodified-since" class="table-of-contents__link toc-highlight">If-Unmodified-Since</a></li></ul></li><li><a href="#range" class="table-of-contents__link toc-highlight">Range</a></li><li><a href="#cookie" class="table-of-contents__link toc-highlight">Cookie</a></li></ul></li><li><a href="#响应首部字段详解" class="table-of-contents__link toc-highlight">响应首部字段详解</a><ul><li><a href="#etag" class="table-of-contents__link toc-highlight">ETag</a><ul><li><a href="#弱etag-值" class="table-of-contents__link toc-highlight">弱ETag 值</a></li></ul></li><li><a href="#location" class="table-of-contents__link toc-highlight">Location</a></li><li><a href="#vary" class="table-of-contents__link toc-highlight">Vary</a></li><li><a href="#set-cookie" class="table-of-contents__link toc-highlight">Set-Cookie</a></li></ul></li><li><a href="#实体首部字段详解" class="table-of-contents__link toc-highlight">实体首部字段详解</a><ul><li><a href="#expires" class="table-of-contents__link toc-highlight">Expires</a></li></ul></li><li><a href="#其他首部字段" class="table-of-contents__link toc-highlight">其他首部字段</a><ul><li><a href="#x-frame-options" class="table-of-contents__link toc-highlight">X-Frame-Options</a></li><li><a href="#x-xss-protection" class="table-of-contents__link toc-highlight">X-XSS-Protection</a></li><li><a href="#dnt" class="table-of-contents__link toc-highlight">DNT</a></li><li><a href="#p3p" class="table-of-contents__link toc-highlight">P3P</a></li><li><a href="#部分web安全常识" class="table-of-contents__link toc-highlight">部分web安全常识</a></li></ul></li><li><a href="#浏览器缓存" class="table-of-contents__link toc-highlight">浏览器缓存</a><ul><li><a href="#强缓存" class="table-of-contents__link toc-highlight">强缓存</a><ul><li><a href="#浏览器是根据什么决定from-disk-cache与from-memory-cache详情" class="table-of-contents__link toc-highlight">浏览器是根据什么决定「from disk cache」与「from memory cache」详情</a></li></ul></li><li><a href="#协商缓存对比缓存" class="table-of-contents__link toc-highlight">协商缓存（对比缓存）</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">学习</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">学习笔记</a></li><li class="footer__item"><a class="footer__link-item" href="/project">个人项目</a></li><li class="footer__item"><a class="footer__link-item" href="/archive">博客归档</a></li><li class="footer__item"><a class="footer__link-item" href="/tags">标签</a></li></ul></div><div class="col footer__col"><div class="footer__title">社交媒体</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/about">关于我</a></li><li class="footer__item"><a href="https://github.com/justwe7" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://space.bilibili.com/6871701" target="_blank" rel="noopener noreferrer" class="footer__link-item">bilibili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://v2ex.com/member/justwe7" target="_blank" rel="noopener noreferrer" class="footer__link-item">v2ex<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" position="right" href="/website">网址收藏</a></li><li class="footer__item"><a href="https://github.com/kuizuo/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item" position="right">基于愧怍博客修改<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/zh-CN/" target="_blank"><img style="height:50px;margin-top:0.5rem" src="/img/buildwith.png"><a></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p><a href="http://beian.miit.gov.cn/">晋ICP备2021001641号</a></p><p>Copyright © 2024 - PRESENT 土豆和土豆丝 Built with Docusaurus.</p></div></div></div></footer></div>
<script src="/assets/js/runtime~main.cf82b7b3.js"></script>
<script src="/assets/js/main.971e4e51.js"></script>
</body>
</html>