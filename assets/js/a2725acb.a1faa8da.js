"use strict";(self.webpackChunkjustwe7_books=self.webpackChunkjustwe7_books||[]).push([[894],{4137:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return d}});var l=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,l,a=function(e,n){if(null==e)return{};var t,l,a={},r=Object.keys(e);for(l=0;l<r.length;l++)t=r[l],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)t=r[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var i=l.createContext({}),o=function(e){var n=l.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},u=function(e){var n=o(e.components);return l.createElement(i.Provider,{value:n},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return l.createElement(l.Fragment,{},n)}},k=l.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=o(t),k=a,d=c["".concat(i,".").concat(k)]||c[k]||m[k]||r;return t?l.createElement(d,s(s({ref:n},u),{},{components:t})):l.createElement(d,s({ref:n},u))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,s=new Array(r);s[0]=k;var p={};for(var i in n)hasOwnProperty.call(n,i)&&(p[i]=n[i]);p.originalType=e,p[c]="string"==typeof e?e:a,s[1]=p;for(var o=2;o<r;o++)s[o]=t[o];return l.createElement.apply(null,s)}return l.createElement.apply(null,t)}k.displayName="MDXCreateElement"},1185:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return i},default:function(){return d},frontMatter:function(){return p},metadata:function(){return o},toc:function(){return c}});var l=t(7462),a=t(3366),r=(t(7294),t(4137)),s=["components"],p={},i="webpack5\u5de5\u7a0b\u5316",o={unversionedId:"\u524d\u7aef\u5de5\u7a0b\u5316/webpack5",id:"\u524d\u7aef\u5de5\u7a0b\u5316/webpack5",title:"webpack5\u5de5\u7a0b\u5316",description:"\u4e0b\u996d\u83dc\uff1a",source:"@site/docs/\u524d\u7aef\u5de5\u7a0b\u5316/webpack5.md",sourceDirName:"\u524d\u7aef\u5de5\u7a0b\u5316",slug:"/\u524d\u7aef\u5de5\u7a0b\u5316/webpack5",permalink:"/docs/\u524d\u7aef\u5de5\u7a0b\u5316/webpack5",draft:!1,editUrl:"https://github.com/justwe7/justwe7.github.io/blob/feature/docs/\u524d\u7aef\u5de5\u7a0b\u5316/webpack5.md",tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"testcafe",permalink:"/docs/\u524d\u7aef\u5de5\u7a0b\u5316/testcafe"},next:{title:"webpack\u6784\u5efa\u5206\u6790",permalink:"/docs/\u524d\u7aef\u5de5\u7a0b\u5316/webpack\u6784\u5efa\u5206\u6790"}},u={},c=[{value:"\u5b8c\u6210\u4e00\u4efd\u652f\u6301html+css+js\u7684\u914d\u7f6e",id:"\u5b8c\u6210\u4e00\u4efd\u652f\u6301htmlcssjs\u7684\u914d\u7f6e",level:2},{value:"\u652f\u6301html\u6a21\u677f",id:"\u652f\u6301html\u6a21\u677f",level:3},{value:"\u652f\u6301css\u9884\u5904\u7406\u5668\u7684\u914d\u7f6e",id:"\u652f\u6301css\u9884\u5904\u7406\u5668\u7684\u914d\u7f6e",level:3},{value:"\u8d44\u6e90\u76f8\u5173",id:"\u8d44\u6e90\u76f8\u5173",level:3},{value:"\u652f\u6301js\u76f8\u5173",id:"\u652f\u6301js\u76f8\u5173",level:3},{value:"\u5b8c\u6210\u5bf9vue\u652f\u6301",id:"\u5b8c\u6210\u5bf9vue\u652f\u6301",level:2},{value:"\u533a\u5206\u6253\u5305\u73af\u5883",id:"\u533a\u5206\u6253\u5305\u73af\u5883",level:2},{value:"\u914d\u7f6edev\u73af\u5883",id:"\u914d\u7f6edev\u73af\u5883",level:3},{value:"\u987a\u4fbf\u63d0\u53d6\u4e00\u4e0bprod\u7684\u914d\u7f6e",id:"\u987a\u4fbf\u63d0\u53d6\u4e00\u4e0bprod\u7684\u914d\u7f6e",level:3},{value:"\u4ee3\u7801\u89c4\u8303",id:"\u4ee3\u7801\u89c4\u8303",level:3},{value:"eslint",id:"eslint",level:4},{value:"stylelint",id:"stylelint",level:4},{value:"hysky",id:"hysky",level:4},{value:"\u7f8e\u5316\u8f93\u51fa",id:"\u7f8e\u5316\u8f93\u51fa",level:3},{value:"FriendlyErrorsPlugin",id:"friendlyerrorsplugin",level:4},{value:"webpackbar",id:"webpackbar",level:4},{value:"\u4f18\u5316\u6253\u5305\u901f\u5ea6",id:"\u4f18\u5316\u6253\u5305\u901f\u5ea6",level:3},{value:"thread-loader",id:"thread-loader",level:4},{value:"babel",id:"babel",level:4},{value:"webpack5-cache",id:"webpack5-cache",level:4},{value:"\u5176\u4ed6\u7f13\u5b58",id:"\u5176\u4ed6\u7f13\u5b58",level:4}],m={toc:c},k="wrapper";function d(e){var n=e.components,t=(0,a.Z)(e,s);return(0,r.kt)(k,(0,l.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"webpack5\u5de5\u7a0b\u5316"},"webpack5\u5de5\u7a0b\u5316"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm init -y \u5feb\u901f\u521b\u5efapackage.json\nnpm install webpack webpack-cli --save-dev\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4e0b\u996d\u83dc\uff1a")),(0,r.kt)("p",null,"webpack4\u4e4b\u540e\u76840\u914d\u7f6e\u539f\u5219\uff0c\u9075\u5faa\u9ed8\u8ba4\u7684\u9879\u76ee\u7ed3\u6784\u53ef\u4ee5\u4e0d\u7528\u7f16\u5199webpack\u7684\u914d\u7f6e\u6587\u4ef6\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"li"},"src/index.js")," \u6587\u4ef6\uff0c\u968f\u4fbf\u5199\u5199 ",(0,r.kt)("inlineCode",{parentName:"li"},"console.log(9527)")," \u4e4b\u7c7b\u7684\u5c31\u884c"),(0,r.kt)("li",{parentName:"ol"},"\u8fd0\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"$ npx webpack")," \u6307\u4ee4\u5c31\u4f1a\u5728\u9879\u76ee\u76ee\u5f55\u4e0b\u751f\u6210\u4e00\u4e2a dist \u76ee\u5f55\uff0c\u4f1a\u4ee5 ",(0,r.kt)("inlineCode",{parentName:"li"},"index.js")," \u4e3a\u5165\u53e3\u751f\u6210\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"main.js")," \u6587\u4ef6")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"p"},"build/webpack.config.js")," \u6587\u4ef6:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const path = require('path');\n\nmodule.exports = {\n\n  entry: './src/main.js',\n\n  output: {\n\n\u200b    filename: 'bundle.js',\n\n\u200b    path: path.resolve(__dirname, '../dist')\n\n  }\n\n};\n\n\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u4fee\u6539package.json\uff0c\u589e\u52a0npm script: ",(0,r.kt)("inlineCode",{parentName:"p"},'"build": "webpack --config build/webpack.config.js"'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"npm run build"),"\uff0c\u6548\u679c\u662f\u4e00\u6837\u7684\uff0c\u53ea\u4e0d\u8fc7\u914d\u7f6e\u7531\u81ea\u5df1\u638c\u63a7\u3002\u770b\uff0cdist\u76ee\u5f55\u751f\u6210\u7684js\u6587\u4ef6\u5df2\u7ecf\u53ebbundle.js\u4e86"))),(0,r.kt)("h2",{id:"\u5b8c\u6210\u4e00\u4efd\u652f\u6301htmlcssjs\u7684\u914d\u7f6e"},"\u5b8c\u6210\u4e00\u4efd\u652f\u6301html+css+js\u7684\u914d\u7f6e"),(0,r.kt)("h3",{id:"\u652f\u6301html\u6a21\u677f"},"\u652f\u6301html\u6a21\u677f"),(0,r.kt)("p",null,"\u5f15\u5165 ",(0,r.kt)("inlineCode",{parentName:"p"},"npm i --save-dev html-webpack-plugin")," ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/jantimon/html-webpack-plugin"},"\u63d2\u4ef6"),"\uff0c\u7136\u540e\u518d\u4fee\u6539webpack\u914d\u7f6e\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"output: {...},\nplugins: [\n  new HtmlWebpackPlugin({\n    inject: 'body',\n    filename: 'index.html',\n    template: path.resolve(__dirname, '../src/index.spa.html')\n  }),\n]\n")),(0,r.kt)("p",null," \u5728src\u4e0b\u521b\u5efa\u4e00\u4e2aindex.spa.html\u4f5c\u4e3a\u9879\u76ee\u6a21\u677f"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u591a\u9875\u5e94\u7528"),"\uff0c\u53ef\u4ee5\u5b9e\u4f8b\u591a\u4e2a\u63d2\u4ef6: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"  entry: {\n    'main': './src/index.js',\n    'beitai': './src/index2.js',\n  },\n  output: {\n    filename: 'js/[name]-[fullhash:8].js',\n    path: path.resolve(__dirname, '../dist'),\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      inject: 'body',\n      filename: 'index.html',\n      template: path.resolve(__dirname, '../src/index.spa.html')\n    }),\n    new HtmlWebpackPlugin({\n      multihtmlCatch: true, // \u5f00\u542f\u591a\u5165\u53e3\u7f13\u5b58\n      inject: 'body',\n      filename: 'beitai.html',\n      chunks: [\"beitai\", \"vendor\", \"manifest\"], // \u6bcf\u4e2ahtml\u5f15\u7528\u7684js\u6a21\u5757\n      template: path.resolve(__dirname, '../src/index.spa.html')\n    }),\n  ]\n}\n")),(0,r.kt)("p",null,"\u6b64\u65f6\u4f1a\u4ee5index.spa.html\u8f93\u51fa\u4e24\u4e2ahtml\u9875\u9762\uff0cindex\u9875\u9762\u56e0\u6ca1\u6709\u6307\u5b9achunks\uff0c\u4f1a\u5f15\u5165\u4e24\u4e2ajs\uff0c\u5f15\u5165\u987a\u5e8f\u662fentry\u5b9a\u4e49\u7684\u987a\u5e8f\u3002beitai.html\u5219\u53ea\u4f1a\u5f15\u5165beitai.js"),(0,r.kt)("h3",{id:"\u652f\u6301css\u9884\u5904\u7406\u5668\u7684\u914d\u7f6e"},"\u652f\u6301css\u9884\u5904\u7406\u5668\u7684\u914d\u7f6e"),(0,r.kt)("p",null,"\u5904\u7406\u6587\u4ef6\u5185\u5bb9\u662f\u9700\u8981loader\u7684\uff0c\u5373\u4f7f\u539f\u751fcss\u90fd\u4e0d\u53ef\u4ee5\uff0c\u6bd5\u7adfjs\u4e0d\u8ba4\u8bc6css\u8bed\u6cd5\u3002\u4e00\u6b21\u6027\u90fd\u88c5\u4e0a ",(0,r.kt)("inlineCode",{parentName:"p"},"npm install --save-dev style-loader css-loader sass sass-loader")," \uff0c\u5982\u679c\u4e0d\u7528\u9884\u5904\u7406\u5668\uff0c\u53bb\u6389\u540e\u9762sass\u7684\u5c31\u53ef\u4ee5"),(0,r.kt)("p",null,"\u7f16\u5199loader:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"  output: {...},\n  module: {\n    rules: [\n      {\n        test: /\\.(sa|sc|c)ss$/,\n        use: [\n          'style-loader',\n          { loader: 'css-loader' },\n          {\n            loader: 'sass-loader',\n            options: {\n              sourceMap: true,\n            },\n          },\n        ]\n      }\n    ]\n  },\n")),(0,r.kt)("p",null,"\u521b\u5efa\u4e00\u4e2astyle.scss\u6587\u4ef6:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-css"},"div {\n  display: flex;\n}\n")),(0,r.kt)("p",null,"js\u6587\u4ef6\u5f15\u5165\u8be5css"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import './style.scss'\nconsole.log(111)\n")),(0,r.kt)("p",null,"\u6253\u5305 ",(0,r.kt)("inlineCode",{parentName:"p"},"npm run build")),(0,r.kt)("p",null,"\u53d1\u73b0\u5e76\u4e0d\u4f1a\u591a\u51fa\u4e00\u4e2acss\u6587\u4ef6\u51fa\u6765\uff0c\u5176\u5b9e\u6ca1\u6709\u90a3\u4e48\u667a\u80fd~\u3002\u4ece\u6253\u5305\u51fa\u6765\u7684main.js\u6587\u4ef6\u641c\u4e00\u4e0b\u201cflex\u201d\uff0ccss\u88ab\u6253\u5305\u8fdbjs\u7684\u5185\u5bb9\u4e86\uff01\u770b\u9875\u9762\uff0c\u6837\u5f0f\u4e5f\u662f\u751f\u6548\u7684\u3002\u8fd9\u4e2a\u6211\u77e5\u9053\uff01vue spa\u6a21\u5f0f\u5c31\u8fd9\u4e48\u63d2\u5165\u7684\u5185\u5bb9\uff0c\u4f46\u662f\u6709\u4e24\u4e2a\u95ee\u9898"),(0,r.kt)("p",null,"\u4e0d\u5229\u4e8e\u8d44\u6e90\u590d\u7528\uff0cflex\u5e76\u6ca1\u6709\u6dfb\u52a0\u6d4f\u89c8\u5668\u524d\u7f00\u5904\u7406\u517c\u5bb9\u6027\u95ee\u9898\u3002\u63a5\u4e0b\u6765\u4e00\u4e00\u89e3\u51b3"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6dfb\u52a0\u6d4f\u89c8\u5668\u524d\u7f00\uff1a")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6dfb\u52a0 ",(0,r.kt)("a",{parentName:"li",href:"https://webpack.js.org/loaders/postcss-loader/"},"postcss")," ",(0,r.kt)("inlineCode",{parentName:"li"},"npm install -D postcss-loader postcss"),"\u3002\u5b83\u7684\u529f\u80fd\u662f\uff1a")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u628acss\u89e3\u6790\u4e3a\u4e00\u4e2a\u62bd\u8c61\u8bed\u6cd5\u6811\n\u8c03\u7528\u63d2\u4ef6\u5904\u7406\u62bd\u8c61\u8bed\u6cd5\u6811\u5e76\u6dfb\u52a0\u529f\u80fd")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u518d\u6dfb\u52a0\u6211\u4eec\u7684\u8001\u670b\u53cb autoprefixer  ",(0,r.kt)("inlineCode",{parentName:"li"},"npm i -D autoprefixer")," ")),(0,r.kt)("p",null,"\u4fee\u6539\u914d\u7f6ecssloader"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"          { loader: 'css-loader' },\n          { \n            loader: 'postcss-loader',\n            options: {\n              postcssOptions: {\n                plugins: {\n                  autoprefixer: {\n                    browsers: ['Android >= 4.0', 'iOS >= 7', \"last 2 versions\"]\n                  },\n                }\n              }\n            }\n          },\n")),(0,r.kt)("p",null,"\u91cd\u65b0\u6253\u5305\u53ef\u4ee5\u770b\u5230css\u5df2\u7ecf\u6dfb\u52a0\u6d4f\u89c8\u5668\u524d\u7f00"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u56e0\u4e3a\u540e\u7eedpostcss\u9700\u8981\u5f15\u5165\u7684\u63d2\u4ef6\u53ef\u80fd\u8d8a\u6765\u8d8a\u591a\uff0c\u63d0\u53d6\u4e00\u4e0bpostcss\u7684\u914d\u7f6e\u5230\u5355\u72ec\u7684\u6587\u4ef6\u4e2d\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"touch postcss.config.js")," :"),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  plugins: {\n    autoprefixer: {\n      browsers: ['Android >= 4.0', 'iOS >= 7', \"last 2 versions\"]\n    },\n  }\n}\n\n\u4fee\u6539webpack\u7684\u914d\u7f6e\uff0c\u53ea\u5b9a\u4e49postcss\u5373\u53ef\n{ loader: 'postcss-loader' },\n")),(0,r.kt)("p",{parentName:"blockquote"},"\u6548\u679c\u662f\u4e00\u6837\u7684")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u63d0\u53d6css")),(0,r.kt)("p",null,"\u8981\u7528\u5230 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/webpack-contrib/mini-css-extract-plugin"},"mini-css-extract-plugin")," \uff0c\u6ce8\u610f\uff0c\u8fd9\u4e2aloader\u4e0estyle-loader\u662f\u51b2\u7a81\u7684\uff0c\u4fee\u6539\u914d\u7f6e\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const MiniCssExtractPlugin = require(\"mini-css-extract-plugin\")\n\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.(sa|sc|c)ss$/,\n        use: [\n          MiniCssExtractPlugin.loader, // \u63d0\u53d6css\u6587\u4ef6,\u4e0d\u4e0estyle-loader\u5171\u5b58\n          // 'style-loader',\n          { loader: 'css-loader' },\n          { \n            loader: 'postcss-loader',\n          },\n          {\n            loader: 'sass-loader',\n            options: {\n              sourceMap: true,\n            },\n          },\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new MiniCssExtractPlugin({\n      filename: \"[name].css\",\n      chunkFilename: \"[id].css\",\n    })\n  ]\n}\n")),(0,r.kt)("p",null,"\u6253\u5305\u540e\u53d1\u73b0\u4f1a\u63d0\u53d6\u4e00\u4e2amain.css\uff0c\u4e14js\u6587\u4ef6\u4e5f\u6682\u65f6\u5e72\u51c0\u591a\u4e86"),(0,r.kt)("h3",{id:"\u8d44\u6e90\u76f8\u5173"},"\u8d44\u6e90\u76f8\u5173"),(0,r.kt)("p",null,"\u4fee\u6539js\uff0c\u5f15\u5165\u4e00\u4e2a\u56fe\u7247\u8d44\u6e90\u8fdb\u884c\u6253\u5305:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import './assets/img/avatar.jpg'\n")),(0,r.kt)("p",null,"\u4f1a\u53d1\u73b0\u6253\u5305\u5931\u8d25\uff0cwebpack\u9ed8\u8ba4\u53ea\u4f1a\u5904\u7406js\u6587\u4ef6\uff0c\u50cfcss\u9700\u8981css\u76f8\u5173loader\uff0c\u5176\u4ed6\u6587\u4ef6\u4e5f\u4e00\u6837\u3002\u9700\u8981\u7528\u5230 ",(0,r.kt)("a",{parentName:"p",href:"https://www.webpackjs.com/loaders/file-loader/"},"file-loader")," ",(0,r.kt)("a",{parentName:"p",href:"https://www.webpackjs.com/loaders/url-loader/"},"url-loader")," \u8fd9\u4e24\u4e2aloader: ",(0,r.kt)("inlineCode",{parentName:"p"},"npm install --save-dev file-loader url-loader")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"file-loader"),"  \u751f\u6210\u7684\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u5c31\u662f\u6587\u4ef6\u5185\u5bb9\u7684 MD5 \u54c8\u5e0c\u503c\u5e76\u4f1a\u4fdd\u7559\u6240\u5f15\u7528\u8d44\u6e90\u7684\u539f\u59cb\u6269\u5c55\u540d"),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"url-loader")," \u529f\u80fd\u7c7b\u4f3c\u4e8e ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/webpack-contrib/file-loader"},(0,r.kt)("inlineCode",{parentName:"a"},"file-loader")),"\uff0c\u4f46\u662f\u5728\u6587\u4ef6\u5927\u5c0f\uff08\u5355\u4f4d byte\uff09\u4f4e\u4e8e\u6307\u5b9a\u7684\u9650\u5236\u65f6\uff0c\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a DataURL")),(0,r.kt)("p",null,"\u4fee\u6539webpack\u914d\u7f6e\uff0c\u589e\u52a0loader\u914d\u7f6e\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"      {\n        test: /\\.(jpe?g|png|gif)$/i,\n        use: [\n          {\n            loader: 'url-loader',\n            options: {\n              limit: 1024, // \u9650\u5236\u8f6cbase64\u7684\u56fe\u7247\u4e3a1k(1024b)\uff0c\u8d85\u8fc71k\u7684\u8f93\u51fa\u6587\u4ef6, \u8bbe\u7f6e\u6b64\u9879\u9700\u8981\u5b89\u88c5\u4f9d\u8d56\uff1afile-loader\n              name: 'images/[name]-[fullhash:8].[ext]',\n            }\n          }\n        ]\n      },\n      {\n        test: /\\.(woff2?|eot|ttf|otf)(\\?.*)?$/i,\n        use: [\n          {\n            loader: 'url-loader',\n            options: {\n              limit: 10240, // 10k\n              name: 'fonts/[name]-[fullhash:8].[ext]'\n            }\n          }\n        ]\n      },\n")),(0,r.kt)("p",null,"\u6253\u5305\u6d4b\u8bd5\u67e5\u770bjs\u53ef\u4ee5\u6b63\u5e38\u6253\u5305\u9759\u6001\u8d44\u6e90\u3002\u4f46\u662f\u53d1\u73b0",(0,r.kt)("strong",{parentName:"p"},"css\u5f15\u5165\u7684\u80cc\u666f\u56fe\u5e76\u4e0d\u6b63\u5e38"),"\uff0c\u53d1\u73b0\u4e00\u5f20\u56fe\u4f1a\u751f\u6210\u4e24\u4e2a\u6587\u4ef6\uff0c\u56fe\u7247\u6587\u4ef6\u548c\u4e00\u4e2a\u5185\u5bb9\u662f ",(0,r.kt)("inlineCode",{parentName:"p"},"export default __webpack_public_path__...")," \u7684\u6587\u4ef6\uff0c\u6700\u7ec8\u53d1\u73b0\uff0c\u9700\u8981\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"css-loader")," \u5904\u8bbe\u7f6eesModule\u4e3afalse:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"{ loader: 'css-loader', options: { esModule: false } },\n")),(0,r.kt)("h3",{id:"\u652f\u6301js\u76f8\u5173"},"\u652f\u6301js\u76f8\u5173"),(0,r.kt)("p",null,"js\u5982\u679c\u81ea\u5df1\u7528\u7406\u8bba\u4e0a\u4e0d\u5904\u7406\u90fd\u884c~ \u4f46\u662f\u6bd5\u7adf\u8fd8\u662f\u4f1a\u5199\u4e00\u4e9b\u65b0\u7684es\u8bed\u6cd5\uff0c\u8fd9\u65f6\u5c31\u7528\u5230 ",(0,r.kt)("a",{parentName:"p",href:"https://babeljs.io/"},"babel")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u57fa\u7840\u7248\uff1a"),"\n\u5148\u6539js\u7528\u6765\u770b\u6548\u679c:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import './style.scss'\nconsole.log(111)\n\ndocument.addEventListener('click', () => {\n  console.log(12580)\n})\n\nconst waitTime = (delay = 300) => new Promise((resolve) => setTimeout(resolve, delay))\n\nwaitTime(4396).then(async () => {\n  await waitTime(7777)\n  console.log(9527)\n})\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u9996\u5148\u5b89\u88c5babel: ",(0,r.kt)("inlineCode",{parentName:"li"},"npm install --save-dev @babel/core @babel/cli @babel/preset-env")),(0,r.kt)("li",{parentName:"ol"},"\u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u547d\u540d\u4e3a babel.config.json \u7684\u914d\u7f6e\u6587\u4ef6\uff08\u9700\u8981 v7.8.0 \u6216\u66f4\u9ad8\u7248\u672c\uff09\uff1a ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "presets": [\n    [\n      "@babel/preset-env",\n      {\n        "targets": {\n          "edge": "17",\n          "firefox": "60",\n          "chrome": "67",\n          "safari": "11.1"\n        },\n        "useBuiltIns": "usage",\n        "corejs": "3.6.5"\n      }\n    ]\n  ]\n}\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"npm install --save-dev babel-loader")," \u518d\u6539webpack\u914d\u7f6e\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"build/webpack.config.js")," module.rules\u589e\u52a0\u4e00\u9879\u914d\u7f6e\uff1a")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"      { test: test: /\\.(sa|sc|c)ss$/, ...},\n      {\n        test: /\\.js$/,\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: ['@babel/preset-env']\n          }\n        },\n        exclude: /node_modules/\n      },\n")),(0,r.kt)("p",null,"\u6253\u5305\u4e4b\u540e\u641c\u4e00\u4e0b ",(0,r.kt)("inlineCode",{parentName:"p"},"12580"),"\uff0c\u7bad\u5934\u51fd\u6570\u5df2\u7ecf\u88ab\u7f16\u8bd1\u4e3aES5\u8bed\u6cd5\u3002Promise\u8fd8\u76f4\u6123\u6123\u5728\u7ed3\u679c\u4e2d\uff0c\u8fd8\u662f\u8981\u5355\u72ec\u5904\u7406\uff0c\u63a5\u4e0b\u6765\u8981\u89e3\u51b3\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"@babel/polyfill\u65b9\u5f0f(\u4e0d\u5efa\u8bae)")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"npm install --save @babel/polyfill")),(0,r.kt)("p",null,"\u4fee\u6539\u914d\u7f6e:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  entry: {\n    'main': ['@babel/polyfill', './src/index.js'],\n  },\n")),(0,r.kt)("p",null,"\u7136\u540e\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"npm run build"),"\u3002\u7f3a\u70b9\u662f\u7f16\u8bd1\u540e\u6587\u4ef6\u4f1a\u5f88\u5927\uff08300b\u7684\u6587\u4ef6\u88ab\u7f16\u8bd1\u6210\u4e8687k!)\uff0c\u4e0d\u7ba1\u662f\u5426\u7528\u5230\u4e86\u65b0\u7684\u8bed\u6cd5\u90fd\u4f1a\u6dfb\u52a0\u8bed\u6cd5\u57ab\u7247\u5bfc\u81f4\u6587\u4ef6\u53d8\u5927"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5b83\u7684\u521d\u8877\u662f\u6a21\u62df\uff08emulate\uff09\u4e00\u6574\u5957 ES2015+ \u8fd0\u884c\u65f6\u73af\u5883\uff0c\u6240\u4ee5\u5b83\u7684\u786e\u4f1a\u4ee5\u5168\u5c40\u53d8\u91cf\u7684\u5f62\u5f0f polyfill Map\u3001Set\u3001Promise \u4e4b\u7c7b\u7684\u7c7b\u578b\uff0c\u4e5f\u7684\u786e\u4f1a\u4ee5\u7c7b\u4f3c Array.prototype.includes() \u7684\u65b9\u5f0f\u53bb\u6ce8\u5165\u6c61\u67d3\u539f\u578b\uff0c\u8fd9\u4e5f\u662f\u5b98\u7f51\u4e2d\u63d0\u5230\u6700\u9002\u5408\u5e94\u7528\u7ea7\u5f00\u53d1\u7684 polyfill\uff0c\u518d\u6b21\u63d0\u9192\u5982\u679c\u4f60\u5728\u5f00\u53d1 library \u7684\u8bdd\uff0c\u4e0d\u63a8\u8350\u4f7f\u7528\uff08\u6216\u8005\u8bf4\u7edd\u5bf9\u4e0d\u8981\u4f7f\u7528\uff09"),(0,r.kt)("p",{parentName:"blockquote"},"\u4e0d\u540c\u4e8e\u63d2\u4ef6\uff0c\u4f60\u6240\u8981\u505a\u7684\u4e8b\u60c5\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5c06 babel-polyfill \u4e00\u6b21\u6027\u7684\u5f15\u5165\u5230\u4f60\u7684\u5de5\u7a0b\u4e2d\uff0c\u901a\u5e38\u662f\u548c\u5176\u4ed6\u7684\u7b2c\u4e09\u65b9\u7c7b\u5e93\uff08\u5982 jQuery\u3001React \u7b49\uff09\u4e00\u540c\u6253\u5305\u5728 vendor.js \u4e2d\u5373\u53ef\u3002\u5728\u4f60\u5199\u7a0b\u5e8f\u7684\u65f6\u5019\uff0c\u4f60\u5b8c\u5168\u4e0d\u4f1a\u611f\u77e5 babel-polyfill \u7684\u5b58\u5728\uff0c\u5982\u679c\u4f60\u7684\u6d4f\u89c8\u5668\u5df2\u7ecf\u652f\u6301 Promise\uff0c\u5b83\u4f1a\u4f18\u5148\u4f7f\u7528 native \u7684 Promise\uff0c\u5982\u679c\u6ca1\u6709\u7684\u8bdd\uff0c\u5219\u4f1a\u91c7\u7528 polyfill \u7684\u7248\u672c\uff08\u8fd9\u4e2a\u884c\u4e3a\u4e0e babel-plugin-transform-runtime \u4e00\u81f4\uff09\uff0c\u5728\u4f7f\u7528 babel-polyfill \u540e\uff0c\u4f60\u4e0d\u9700\u8981\u5f15\u5165 babel-plugin-transform-runtime \u63d2\u4ef6\u548c\u5176\u4ed6\u4f9d\u8d56\u7684\u7c7b\u5e93\u3002\u5b83\u7684\u7f3a\u70b9\u4e5f\u663e\u800c\u6613\u89c1\uff0c\u90a3\u5c31\u662f\u5360\u6587\u4ef6\u7a7a\u95f4\u5e76\u4e14\u65e0\u6cd5\u6309\u9700\u5b9a\u5236\u3002"),(0,r.kt)("p",{parentName:"blockquote"},"\u4f5c\u8005\uff1aHenry\n\u94fe\u63a5\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://www.zhihu.com/question/49382420/answer/223915243"},"https://www.zhihu.com/question/49382420/answer/223915243"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://babeljs.io/docs/en/babel-plugin-transform-runtime"},"@babel/plugin-transform-runtime"))),(0,r.kt)("p",null,"polyfill\u5f88\u5f3a(\u5e9e)\u5927\uff0c\u6211\u9009\u62e9 ",(0,r.kt)("inlineCode",{parentName:"p"},"npm install --save-dev @babel/plugin-transform-runtime")," "),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u8fd9\u4e2a\u63d2\u4ef6\u8ba9 Babel \u53d1\u73b0\u4ee3\u7801\u4e2d\u4f7f\u7528\u5230 Symbol\u3001Promise\u3001Map \u7b49\u65b0\u7c7b\u578b\u65f6\uff0c\u81ea\u52a8\u4e14\u6309\u9700\u8fdb\u884c polyfill\uff0c\u56e0\u4e3a\u662f\u201c\u81ea\u52a8\u201d\u6240\u4ee5\u975e\u5e38\u53d7\u5927\u5bb6\u7684\u6b22\u8fce\u3002")),(0,r.kt)("p",null,"\u7136\u540e\u7ed3\u5408 ",(0,r.kt)("inlineCode",{parentName:"p"},"npm install --save @babel/runtime-corejs3 ")," \u3002"),(0,r.kt)("p",null,"\u521b\u5efa",(0,r.kt)("inlineCode",{parentName:"p"},"babel.config.js")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = function (api) {\n  api.cache(true)\n  return {\n    presets: [\n      [\n        '@babel/preset-env',\n        {}\n      ]\n    ],\n    plugins: [\n      [\n        '@babel/plugin-transform-runtime',\n        {\n          'absoluteRuntime': false,\n          'corejs': 3,\n          'helpers': true,\n          'regenerator': true\n        }\n      ]\n    ]\n  }\n}\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u56e0\u4e3a\u540e\u7eedbabel\u8981\u505a\u66f4\u591a\u7684\u4e8b\u60c5\uff08\u6bd4\u5982lodash\uff09\u914d\u7f6e\u592a\u591a\u63d0\u53d6\u5230\u5355\u6587\u4ef6\u66f4\u5bb9\u6613\u7ef4\u62a4")),(0,r.kt)("p",null,"\u6253\u5305\u4ee3\u7801\uff0cmain.js\u4ece87k\u7cbe\u7b80\u523039k"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528",(0,r.kt)("a",{parentName:"strong",href:"https://www.npmjs.com/package/polyfill-service"},"polyfill-service"))),(0,r.kt)("p",null,"\u901a\u8fc7cdn\u65b9\u5f0f\u5f15\u5165polyfill\u7684cdn\u8d44\u6e90\uff0c\u8be5\u670d\u52a1\u4f1a\u6839\u636eua\u8fd4\u56de\u9700\u8981\u6dfb\u52a0\u8bed\u6cd5\u57ab\u7247\u7684\u5185\u5bb9\uff0c\u7f3a\u70b9\u662fwebview\u7684ua\u53ef\u80fd\u4f1a\u8bef\u5bfc\u8be5\u670d\u52a1\u5bfc\u81f4\u4ee3\u7801\u6267\u884c\u5931\u8d25"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"}," \u4f7f\u7528\u4e0d\u540c\u7684\u6d4f\u89c8\u5668\u8bbf\u95ee ",(0,r.kt)("a",{parentName:"p",href:"https://polyfill.io/v3/polyfill.min.js"},"https://polyfill.io/v3/polyfill.min.js")," \u67e5\u770b\u8fd4\u56de\u7684\u5185\u5bb9")),(0,r.kt)("p",null,"\u4f7f\u7528\u4ee3\u7801\u793a\u4f8b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<script crossorigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js"><\/script>\n')),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://polyfill.io/v3/"},"Polyfill.io")," \u901a\u8fc7\u5206\u6790\u8bf7\u6c42\u5934\u4fe1\u606f\u4e2d\u7684 UserAgent \u5b9e\u73b0\u81ea\u52a8\u52a0\u8f7d\u6d4f\u89c8\u5668\u6240\u9700\u7684 polyfill\u3002"),(0,r.kt)("p",null,"\u9ad8\u7ea7\u7528\u6cd5"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://polyfill.io/v3/"},"Polyfill.io")," \u6709\u4e00\u4efd\u9ed8\u8ba4\u6346\u7ed1\u5217\u8868\uff0c\u5305\u62ec\u4e86\u6700\u5e38\u89c1\u7684 HTML5 \u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"document.querySelector"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"Element.classList"),"\u3001ES5\u3001ES6\u3001ES7 \u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"fetch"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"Array.from")," \u7b49\u7b49\u3002"),(0,r.kt)("p",null,"\u53ef\u4ee5\u901a\u8fc7\u4f20\u9012 ",(0,r.kt)("inlineCode",{parentName:"p"},"features")," \u53c2\u6570\u6765\u81ea\u5b9a\u4e49\u529f\u80fd\u5217\u8868\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- \u52a0\u8f7d Promise&fetch --\x3e<script src="https://cdn.polyfill.io/v3/polyfill.min.js?features=Promise,fetch"><\/script>\n\x3c!-- \u52a0\u8f7d\u6240\u6709 ES5&ES6 \u65b0\u7279\u6027 --\x3e<script src="https://cdn.polyfill.io/v3/polyfill.min.js?features=es5,es6,es7"><\/script>\n')),(0,r.kt)("p",null,"Polyfill.io \u8fd8\u63d0\u4f9b\u4e86\u5176\u4ed6 API\uff0c\u5177\u4f53\u8bf7\u67e5\u9605\u5b98\u65b9\u6587\u6863\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- \u5f02\u6b65\u52a0\u8f7d --\x3e\n<script src="https://cdn.polyfill.io/v3/polyfill.min.js?callback=main" async defer><\/script>\n\x3c!-- \u65e0\u89c6 UA\uff0c\u59cb\u7ec8\u52a0\u8f7d --\x3e\n<script src="https://cdn.polyfill.io/v3/polyfill.js?features=modernizr:es5array|always"><\/script>\n')),(0,r.kt)("p",null,"\u963f\u91cc\u63d0\u4f9b\u7684\u52a8\u6001 Polyfill \u670d\u52a1\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://polyfill.alicdn.com/polyfill.min.js?features=Promise%2CArray.prototype.includes"><\/script>\n')),(0,r.kt)("p",null,"\u6269\u5c55\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://developer.aliyun.com/article/783477"},"99% \u5f00\u53d1\u8005\u6ca1\u5f04\u660e\u767d\u7684 babel \u77e5\u8bc6")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://juejin.cn/post/6975556168752037919"},"Babel polyfill \u5e38\u89c1\u914d\u7f6e\u5bf9\u6bd4"))),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/clean-webpack-plugin"},(0,r.kt)("strong",{parentName:"a"},"clean-webpack-plugin"))),(0,r.kt)("p",null,"\u6bcf\u6b21\u4ee3\u7801\u53d8\u66f4\uff0c\u6253\u5305\u90fd\u4f1a\u5728dist\u751f\u6210\u65b0\u7684\u6587\u4ef6\uff0c\u6b21\u6570\u591a\u4e86\u65e7\u7684\u6587\u4ef6\u4f1a\u8d8a\u6765\u8d8a\u591a\uff0c\u53ef\u4ee5\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"npm install --save-dev clean-webpack-plugin")," \u6765\u6e05\u7a7a\u65e0\u5173\u6587\u4ef6:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const { CleanWebpackPlugin } = require('clean-webpack-plugin')\n{\n    plugins: [\n        ...,\n        new CleanWebpackPlugin(),\n    ],\n}\n")),(0,r.kt)("h2",{id:"\u5b8c\u6210\u5bf9vue\u652f\u6301"},"\u5b8c\u6210\u5bf9vue\u652f\u6301"),(0,r.kt)("p",null,"\u9996\u5148\u5b89\u88c5vue\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"npm i vue@2 -S")," (\u4e0d\u8981\u95ee\u6211\u4e3a\u4ec0\u4e48\u8fd8\u88c5v2\u7248\u672c\u7684\uff0cv3\u6211\u60f3\u7528vite)"),(0,r.kt)("p",null,"\u7136\u540e\u5b89\u88c5 ",(0,r.kt)("inlineCode",{parentName:"p"},"npm i vue-loader@15 vue-template-compiler vue-style-loader")," "),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://vue-loader.vuejs.org/"},"Vue Loader")," \u662f\u4e00\u4e2a ",(0,r.kt)("a",{parentName:"p",href:"https://webpack.js.org/"},"webpack")," \u7684 loader\uff0c\u5b83\u5141\u8bb8\u4f60\u4ee5\u4e00\u79cd\u540d\u4e3a",(0,r.kt)("a",{parentName:"p",href:"https://vue-loader.vuejs.org/zh/spec.html"},"\u5355\u6587\u4ef6\u7ec4\u4ef6 (SFCs)"),"\u7684\u683c\u5f0f\u64b0\u5199 Vue \u7ec4\u4ef6")),(0,r.kt)("p",null,"\u4fee\u6539html\u6a21\u677f:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<body>\n  <div id="app"></div>\n</body>\n')),(0,r.kt)("p",null,"\u65b0\u589eapp.vue:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <div id="app">\n    vue app\n    <button @click="handleClick">bar</button>\n  </div>\n</template>\n<script type="text/ecmascript-6">\nexport default {\n  data () {\n    return {\n      foo: \'vue app\'\n    }\n  },\n  methods: {\n    handleClick () {\n      alert(8)\n    }\n  }\n}\n<\/script>\n<style lang="scss" rel="stylesheet/scss">\n#app {\n  width: 100px;\n  height: 100px;\n  border: 1px solid #000;\n}\n</style>\n\n')),(0,r.kt)("p",null,"\u4fee\u6539main.js:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import Vue from 'vue'\nimport App from './app.vue'\nimport './style.scss'\n\nnew Vue({\n  el: '#app',\n  render: h => h(App)\n})\n")),(0,r.kt)("p",null,"\u65b0\u589ewebpack\u914d\u7f6e:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const { VueLoaderPlugin } = require('vue-loader')\n\nmodule.exports = {\n  module: {\n    rules: [\n      /* vue */\n      {\n        test: /\\.vue$/,\n        loader: 'vue-loader'\n      }\n    ]\n  },\n  plugins: [\n    new VueLoaderPlugin(),\n}\n")),(0,r.kt)("p",null,"\u6b64\u65f6vue\u53ef\u4ee5\u6b63\u5e38\u7f16\u8bd1\uff0c\u5e76\u5c06css\u3001js\u63d0\u53d6\u3002\u63a5\u4e0b\u6765\u5f15\u5165vue-router: ",(0,r.kt)("inlineCode",{parentName:"p"},"npm i vue-router@3 -S")),(0,r.kt)("p",null,"\u65b0\u589e&\u4fee\u6539\u82e5\u5e72\u6587\u4ef6\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// src/app.vue\n<template>\n  <div id="app">\n    vue app\n    <router-link to="/">\u9996\u9875</router-link>\n    <router-link to="/detail">\u8be6\u60c5</router-link>\n    <button @click="handleClick">bar</button>\n    <router-view></router-view>\n  </div>\n</template>\n<script type="text/ecmascript-6">\nexport default {\n  data () {\n    return {\n      foo: \'vue app\'\n    }\n  },\n  methods: {\n    handleClick () {\n      alert(8)\n    }\n  }\n}\n<\/script>\n<style lang="scss" rel="stylesheet/scss">\n#app {\n  color: peru;\n}\n</style>\n\n// src/index.js\nimport Vue from \'vue\'\nimport App from \'./app.vue\'\nimport \'./style.scss\'\nimport router from \'./router\'\n\nconst app = new Vue({\n  el: \'#app\',\n  router,\n  render: h => h(App)\n})\n\n// src/views/home.vue\n<template>\n  <div class="home">\n    \u9875\u9762 home\n  </div>\n</template>\n<script type="text/ecmascript-6">\nexport default {}\n<\/script>\n<style lang="scss" rel="stylesheet/scss">\n.home {\n  height: 300px;\n  background-color: yellowgreen;\n}\n</style>\n\n// src/views/detail.vue\n<template>\n  <div class="detail">\n    \u9875\u9762 detail\n  </div>\n</template>\n<script type="text/ecmascript-6">\nexport default {}\n<\/script>\n<style lang="scss" rel="stylesheet/scss">\n.detail {\n  height: 300px;\n  background-color: burlywood;\n}\n</style>\n\n// src/router/index.js\nimport Vue from \'vue\'\nimport Router from \'vue-router\'\nVue.use(Router)\n\nexport default new Router({\n  mode: \'history\',\n  routes: [\n    { path: \'/\', component: () => import(/* webpackChunkName: "home" */ \'../views/home.vue\') },\n    { path: \'/detail\', component: () => import(/* webpackChunkName: "detail" */ \'../views/detail.vue\') }\n  ]\n})\n')),(0,r.kt)("p",null,"\u6253\u5305\u53ef\u4ee5\u770b\u5230\u8def\u7531\u53ef\u4ee5\u6b63\u5e38\u5339\u914d\u4e86\uff0c\u4f46\u662f\u4f1a\u591a\u4e00\u4e2a\u7c7b\u4f3c ",(0,r.kt)("inlineCode",{parentName:"p"},"bundle.js.LICENSE.txt"),"\u5f00\u6e90\u534f\u8bae\u58f0\u660e\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528 ",(0,r.kt)("a",{parentName:"p",href:"https://webpack.docschina.org/plugins/terser-webpack-plugin/"},"terser")," \u538b\u7f29:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const TerserPlugin = require('terser-webpack-plugin')\nmodule.exports = {\n  ...\n  optimization: {\n    minimizer: [\n      new TerserPlugin({\n        extractComments: false,\n        terserOptions: {\n          format: {\n            comments: false,\n          }\n        }\n       }),\n    ]\n  }\n}\n")),(0,r.kt)("h2",{id:"\u533a\u5206\u6253\u5305\u73af\u5883"},"\u533a\u5206\u6253\u5305\u73af\u5883"),(0,r.kt)("h3",{id:"\u914d\u7f6edev\u73af\u5883"},"\u914d\u7f6edev\u73af\u5883"),(0,r.kt)("p",null,"\u9996\u5148\u5b89\u88c5 ",(0,r.kt)("a",{parentName:"p",href:"https://webpack.js.org/api/webpack-dev-server/"},"webpack-dev-server"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"npm install --save-dev webpack-dev-server")),(0,r.kt)("p",null,"\u56e0\u4e3a\u8981\u533a\u5206\u5f00\u53d1\u73af\u5883\u548c\u751f\u6210\u73af\u5883\uff0c\u6240\u4ee5\u5355\u72ec\u521b\u5efa\u4e00\u4efddev\u9700\u8981\u7684\u914d\u7f6e\u5e76\u7ee7\u627f\u4e4b\u524d\u7f16\u5199\u7684\u57fa\u7840\u914d\u7f6e\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// build/webpack.dev.js\nconst webpack = require('webpack')\nconst { merge } = require('webpack-merge')\nconst baseConfig = require('./webpack.config.js')\n\nmodule.exports = merge(baseConfig, {\n  // Set the mode to development or production\n  mode: 'development',\n  // Control how source maps are generated\n  devtool: 'inline-source-map',\n  // Spin up a server for quick development\n  devServer: {\n    host: '127.0.0.1',\n    historyApiFallback: true,\n    open: true,\n    compress: true,\n    hot: true,\n    port: 3000,\n    proxy: {\n    }\n  },\n  plugins: [\n    // [webpack-dev-server] \"hot: true\" automatically applies HMR plugin, you don't have to add it manually to your webpack configuration. \n    //new webpack.HotModuleReplacementPlugin(), // \u4ece v4.0.0 \u5f00\u59cb\uff0c\u70ed\u6a21\u5757\u66f4\u6362\u9ed8\u8ba4\u5904\u4e8e\u542f\u7528\u72b6\u6001\uff0c\u5982\u679c\u624b\u52a8\u8c03\u7528\u9700\u8981\u8bbe\u7f6e(devServer.hot: false)\n  ],\n})\n\n/*  */\n")),(0,r.kt)("p",null,"\u7136\u540e\u901a\u8fc7dev-server\u542f\u52a8\u9879\u76ee\uff0c\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u901a\u8fc7\u6307\u4ee4\u8c03\u7528\uff0c\u4fee\u6539package.json:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"scripts": {\n  "dev": "node build/dev-server.js",\n  "dev2": "webpack serve --config build/webpack.dev.js"\n},\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5355\u72ec\u521b\u5efa\u4e00\u4e2a\u542f\u52a8\u670d\u52a1\u7684\u6587\u4ef6 ",(0,r.kt)("inlineCode",{parentName:"p"},"build/dev-server.js"),":"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const Webpack = require('webpack')\nconst WebpackDevServer = require('webpack-dev-server')\nconst webpackConfig = require('./webpack.dev.js')\n\nconst compiler = Webpack(webpackConfig)\nconst devServerOptions = { ...webpackConfig.devServer }\nconst server = new WebpackDevServer(devServerOptions, compiler)\n\nconst runServer = async () => {\n  console.log('Starting server...')\n  await server.start();\n};\n\nrunServer()\n")))),(0,r.kt)("p",null,"\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"npm run dev \u6216\u8005 npm run dev2")," \u90fd\u53ef\u4ee5"),(0,r.kt)("p",null,"\u54e6\u5bf9\u4e86\uff0c\u5982\u679c\u60f3\u5b9e\u73b0css\u7684\u70ed\u66f4\u65b0\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5728\u5f00\u53d1\u73af\u5883\u5c06 ",(0,r.kt)("inlineCode",{parentName:"li"},"mini-css-extract-plugin")," \u7981\u7528:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// webpack.config.js\nconst isProd = process.env.NODE_ENV === 'production'\nmodule.exports = {\n  plugins: [\n  //  new MiniCssExtractPlugin({\n  //    filename: \"[name]-[fullhash:8].css\",\n  //  })\n  ],\n  module: {\n    rules: [\n      /* css */\n      {\n        test: /\\.(sa|sc|c)ss$/,\n        use: [\n          // MiniCssExtractPlugin.loader, // \u63d0\u53d6css\u6587\u4ef6,\u4e0d\u4e0estyle-loader\u5171\u5b58\n          isProd ?\n            {\n              loader: MiniCssExtractPlugin.loader,\n              options: {\n                publicPath: (resourcePath, context) => {\n                  return path.relative(path.dirname(resourcePath), context) + \"/\";\n                },\n              },\n            } :\n            'style-loader', // \u6253\u5305css\u5230style\u6807\u7b7e\n          { loader: 'css-loader', options: { esModule: false } },\n          {\n            loader: 'postcss-loader',\n          },\n          {\n            loader: 'sass-loader',\n            options: {\n              sourceMap: true,\n            },\n          },\n        ]\n      },\n      ...\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"\u5c06")),(0,r.kt)("h3",{id:"\u987a\u4fbf\u63d0\u53d6\u4e00\u4e0bprod\u7684\u914d\u7f6e"},"\u987a\u4fbf\u63d0\u53d6\u4e00\u4e0bprod\u7684\u914d\u7f6e"),(0,r.kt)("p",null,"\u4e0edev\u73af\u5883\u4e00\u6837\uff0c\u521b\u5efa\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u914d\u7f6e\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"webpack.prod.js"),"\uff0c\u628a ",(0,r.kt)("inlineCode",{parentName:"p"},"wepack.config.js")," \u4e2d\u76f8\u5173\u914d\u7f6e\u63d0\u53d6\u5230prod\u4e2d\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const { merge } = require('webpack-merge')\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin')\nconst TerserPlugin = require('terser-webpack-plugin')\n\nconst baseConfig = require('./webpack.config.js')\n\nmodule.exports = merge(baseConfig, {\n  mode: 'production',\n  plugins: [\n    new MiniCssExtractPlugin({\n      filename: \"[name]-[fullhash:8].css\",\n    })\n  ],\n  optimization: {\n    minimize: true,\n    minimizer: [\n      new TerserPlugin({\n        extractComments: false,\n        terserOptions: {\n          format: {\n            comments: false\n          }\n        }\n      })\n    ]\n  }\n})\n")),(0,r.kt)("p",null,"\u4fee\u6539package.json: ",(0,r.kt)("inlineCode",{parentName:"p"},' "build": "cross-env NODE_ENV=production webpack --config build/webpack.prod.js"')),(0,r.kt)("h1",{id:"\u4f18\u5316\u6253\u5305"},"\u4f18\u5316\u6253\u5305"),(0,r.kt)("h3",{id:"\u4ee3\u7801\u89c4\u8303"},"\u4ee3\u7801\u89c4\u8303"),(0,r.kt)("h4",{id:"eslint"},"eslint"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u201c\u4fdd\u8bc1\u4ee3\u7801\u7684\u4e00\u81f4\u6027\u548c\u907f\u514d\u9519\u8bef\u201d ")),(0,r.kt)("p",null,"\u56e2\u961f\u6210\u5458\u7684\u4ee3\u7801\u98ce\u683c\u80af\u5b9a\u4f1a\u6709\u4e0d\u540c\uff0c\u5047\u5982\u6bcf\u4e2a\u4eba\u90fd\u6309\u81ea\u5df1\u7684\u98ce\u683c\u5199\u4ee3\u7801\u3002\u6709\u4eba\u5199\u5206\u53f7\u6709\u4eba\u4e0d\u5199\uff1b\u6709\u4eba\u559c\u6b22\u5355\u5f15\u53f7\u6709\u4eba\u559c\u6b22\u53cc\u5f15\u53f7\u2026\u2026\u4ee3\u7801\u53ef\u8bfb\u6027\u5dee\u3002\u6700\u91cd\u8981\u7684\u662feslint\u8fd8\u80fd\u5e2e\u52a9\u6211\u4eec\u68c0\u67e5\u4ee3\u7801\uff0c\u63d0\u524d\u53d1\u73b0\u8bed\u6cd5\u9519\u8bef\uff0c\u907f\u514d\u5230\u6d4f\u89c8\u5668\u8c03\u8bd5\u65f6\u624d\u80fd\u53d1\u73b0"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5b89\u88c5 ",(0,r.kt)("a",{parentName:"li",href:"https://cn.eslint.org/docs/user-guide/getting-started"},"eslint"),"\u53ca\u521d\u59cb\u5316")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"> npm i eslint\n> npx eslint --init \u6216 npm init @eslint/config\n\neslint \u914d\u7f6e\u95ee\u7b54,\u4ee5\u4e0b\u662f\u6211\u7684\u9009\u9879:\n\u2714 How would you like to use ESLint? \xb7 problems\n\u2714 What type of modules does your project use? \xb7 esm\n\u2714 Which framework does your project use? \xb7 vue\n\u2714 Does your project use TypeScript? \xb7 No\n\u2714 Where does your code run? \xb7 browser, node\n\u2714 What format do you want your config file to be in? \xb7 JavaScript\n\n\u56de\u8f66\u540e\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4f1a\u751f\u6210\u4e00\u4e2a .eslintrc.js \u914d\u7f6e\u6587\u4ef6\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5b9a\u5236\u4ee3\u7801\u98ce\u683c"),(0,r.kt)("p",{parentName:"li"},"\u7ecf\u8fc7\u7b2c\u4e00\u6b65\u7684\u914d\u7f6e\uff0c\u9879\u76ee\u4f1a\u6709\u4e00\u5957\u57fa\u672c\u7684eslint\u89c4\u5219\u3002\u4f46\u662f\u4e0d\u592a\u7b26\u5408\u81ea\u5df1\u7684\u4ee3\u7801\u4e60\u60ef\uff0c\u63a5\u4e0b\u6765\u8fdb\u884c\u4e00\u4e9b\u89c4\u5219\u7684\u5b9a\u5236\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u4e2a\u4eba\u4e0d\u559c\u6b22 ",(0,r.kt)("inlineCode",{parentName:"p"},"eslint:recommended"),"\u9884\u8bbe\u7684\u89c4\u5219\uff0c",(0,r.kt)("a",{parentName:"p",href:"https://github.com/standard/standard/blob/master/docs/RULES-zhcn.md"},"standard")," YYDS\uff01",(0,r.kt)("inlineCode",{parentName:"p"},"npm install standard --save-dev"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"eslint\u4e0d\u652f\u6301\u6700\u65b0\u7684\u5b9e\u9a8c\u6027ECMAScript\u6807\u51c6\u9700\u8981 ",(0,r.kt)("inlineCode",{parentName:"p"},"@babel/eslint-parser")),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"ESLint\u7684",(0,r.kt)("strong",{parentName:"p"},"\u9ed8\u8ba4\u89e3\u6790\u5668"),"\u548c",(0,r.kt)("strong",{parentName:"p"},"\u6838\u5fc3\u89c4\u5219"),"\u4ec5\u652f\u6301\u6700\u65b0\u7684\u6700\u7ec8 ECMAScript \u6807\u51c6\uff0c\u4e0d\u652f\u6301 Babel \u63d0\u4f9b\u7684\u5b9e\u9a8c\u6027\uff08\u4f8b\u5982\u65b0\u529f\u80fd\uff09\u548c\u975e\u6807\u51c6\uff08\u4f8b\u5982Flow\u6216TypeScript\u7c7b\u578b\uff09\u8bed\u6cd5\u3002@ babel / eslint-parser \u662f\u5141\u8bb8 ESLint \u5728\u7531 Babel \u8f6c\u6362\u7684\u6e90\u4ee3\u7801\u4e0a\u8fd0\u884c\u7684\u89e3\u6790\u5668\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u81ea\u5df1\u6dfb\u52a0\u4e00\u4e9b\u914d\u7f6e,\u4ee5\u4e0b\u4e3a\u4e2a\u4eba\u914d\u5b8c\u4e4b\u540e\u7684.eslintrc.js(\u9047\u5230\u7684\u4e00\u4e9b\u5751\uff0c\u5199\u5728\u6ce8\u91ca\u4e0a\u4e86):"))),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  env: {\n    browser: true,\n    es2021: true,\n    node: true\n  },\n  extends: [\n    'plugin:vue/essential',\n    'standard' // https://github.com/standard/standard/blob/master/docs/RULES-zhcn.md#javascript-standard-style\n  ],\n  // parser: '@babel/eslint-parser', // vue-eslint\u548cbabel-parser\u4e8c\u8005\u6709\u51b2\u7a81\u3002\u7f16\u8bd1\u5668\u914d\u7f6e\u5728\u6839\u8282\u70b9\u4f1a\u5bfc\u81f4vue sfc\u6a21\u5f0feslint\u62a5\u9519\n  parserOptions: {\n    parser: '@babel/eslint-parser',\n    ecmaVersion: 12,\n    sourceType: 'module',\n    ecmaFeatures: {\n      modules: true\n    }\n  },\n  plugins: [\n    'vue'\n  ],\n  rules: {\n    // promise\u5f3a\u5236\u8981\u6c42reject()\u629b\u51faerror\u3010\u7981\u6b62\u3011\n    'prefer-promise-reject-errors': 'off',\n    // vue \u7ec4\u4ef6\u8981\u6c42\u5b9a\u4e49name\u3010\u7981\u6b62\u3011\n    'vue/multi-word-component-names': ['off', {}],\n    // \u7bad\u5934\u51fd\u6570\u4fdd\u62a4\u7b26() \u3010\u4f5c\u4e3a\u56de\u8c03\u5fc5\u8981\u65f6\u3011https://eslint.org/docs/rules/arrow-parens#arrow-parens\n    'arrow-parens': ['error', 'as-needed', { requireForBlockBody: true }]\n  }\n}\n\n")),(0,r.kt)("p",{parentName:"li"},"\u8fd9\u7bc7",(0,r.kt)("a",{parentName:"p",href:"https://xieyufei.com/2021/04/25/Front-Eslint.html"},"eslint\u6587\u7ae0"),"\u4ecb\u7ecd\u7684\u633a\u5168\u7684 ")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u63a5\u5165\u5230webpack"),(0,r.kt)("p",{parentName:"li"},"\u7ecf\u8fc71.2\u6b65\u7684\u914d\u7f6e\uff0ceslint\u662f\u52a0\u5165\u5230\u9879\u76ee\u4e2d\u4e86\uff0cnpm script\u6dfb\u52a0\u4e00\u6761 ",(0,r.kt)("inlineCode",{parentName:"p"},'"lint": "eslint --ext .js,.vue src"'),"\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"npm run lint"),"\u6821\u9a8c\uff0c\u6216\u8005\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},'"lint:fix": "eslint --ext .js,.vue src server --fix"'),"\u8fdb\u884c\u8bed\u6cd5\u4fee\u590d\uff0c\u4f46\u662f\u5bf9\u5f00\u53d1\u65f6\u4e0d\u65b9\u4fbf\u3002\u8fd9\u65f6\u5c31\u7528\u5230\u4e86","[`eslint-webpack-plugin]","`(",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/eslint-webpack-plugin"},"https://www.npmjs.com/package/eslint-webpack-plugin"),") :"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const ESLintPlugin = require('eslint-webpack-plugin') // \u4f18\u5316\u7f16\u8bd1\u65f6eslint\u5c55\u793a\n\nplugins: [\n  new ESLintPlugin({\n    cache: true,\n    emitWarning: true,\n    extensions: ['js', 'vue'],\n    failOnError: false,\n    fix: true\n  }),\n]\n")),(0,r.kt)("p",{parentName:"li"},"\u4e2a\u4eba\u559c\u6b22\u6253\u5f00fix\u9009\u9879\uff0c\u8fd9\u6837\u81ea\u52a8\u4fee\u590d\u5c31\u4e0d\u53d7\u9650\u4e8e\u7f16\u8f91\u5668\u7684\u914d\u7f6e\uff0c\u4e14\u534f\u540c\u5de5\u4f5c\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5e2e\u52a9\u81ea\u5df1\u53bb\u201c\u7ea0\u6b63\u201d\u4ee3\u7801\u4e60\u60ef\u3002\u540c\u65f6\u4e5f\u4ee3\u66ff\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"prettier"),"\u7684\u5f3a\u5236\u4fee\u590d\u529f\u80fd\u3002"))),(0,r.kt)("h4",{id:"stylelint"},"stylelint"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5b89\u88c5"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"// \u5b89\u88c5stylelint\nnpm install --save-dev stylelint stylelint-config-standard  // \u6838\u5fc3\u529f\u80fd\n\n// \u6dfb\u52a0vue\uff0cscss\u7684\u63d2\u4ef6 \uff08\u4f7f\u7528\u9ad8\u7248\u672cstylelint\u9047\u5230\u4e86\u4e00\u4e9b\u5751\u5bfc\u81f4vue+scss\u6821\u9a8c\u6709\u95ee\u9898\uff0c\u7ecf\u5c1d\u8bd5\uff0c\u4ee5\u4e0b\u7ec4\u5408\u53ef\u7528\u3010stylelint-config-recommended-scss\u3011\uff09\nnpm i stylelint-config-recommended-scss stylelint-config-recommended-vue stylelint-config-standard-scss -D\n\n// \u6dfb\u52a0css\u6837\u5f0f\u8868\u5c5e\u6027\u6392\u5e8f\u89c4\u5219\uff08\u5982\u679c\u4f7f\u7528@justwe7/stylelint-order-standard\u53ef\u4ee5\u4e0d\u88c5\uff0c\u5305\u4e2d\u6709\u4f9d\u8d56\uff09\nnpm install stylelint-order --save-dev\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6 ",(0,r.kt)("inlineCode",{parentName:"p"},"touch .stylelintrc.js"),"\uff08\u7bc7\u5e45\u539f\u56e0\uff0c\u8282\u9009\u4e86\u4e00\u90e8\u5206\u5173\u952e\u4ee3\u7801\uff09: "),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"stylelint-order\u7684\u6392\u5e8f\u914d\u7f6e\uff0c ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/stormwarning/stylelint-config-recess-order"},"stylelint-config-recess-order"),"\u4e2a\u4eba\u66f4\u559c\u6b22\u8fd9\u4efd\u914d\u7f6e\u8868\uff0c\u4f46\u662f\u6211\u5c06\u914d\u7f6e\u590d\u5236\u5230\u672c\u5730\uff0c\u65b9\u4fbf\u8c03\u6574\u3002\u7528\u5728\u9879\u76ee\u4e2d\u6700\u597d\u81ea\u5df1\u53d1\u5305(\u4e0b\u9762\u6709\u5199\uff09\uff0c\u4fdd\u8bc1\u89c4\u5219\u590d\u7528")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  extends: [\n    'stylelint-config-standard-scss',\n    'stylelint-config-recommended-vue/scss',\n    'stylelint-config-standard',\n  ],\n  plugins: ['stylelint-order'],\n  rules: {\n    // ...\n    'order/properties-order': [\n      [\n        // \u5f71\u54cd\u5143\u7d20\u5c55\u793a\u4e14\u4e00\u822c\u4e0e\u8bbe\u8ba1\u7a3f\u6837\u5f0f\u65e0\u5173\u8054\n        'opacity',\n        'visibility',\n        'box-sizing',\n        'overflow',\n        'overflow-x',\n        'overflow-y',\n        'overflow-scrolling',\n\n        'content',\n        'position',\n        'top',\n      ],\n      {\n        unspecified: 'bottom',\n        severity: 'warning',\n      },\n    ],\n  },\n}\n\n")),(0,r.kt)("p",{parentName:"li"},"\u4ee5\u4e0a\u6392\u5e8f\u89c4\u5219\u6211\u5c01\u88c5\u5230\u4e86 ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@justwe7/stylelint-order-standard"},"stylelint-order-standard")," \uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u4ee5\u4e0b\u914d\u7f6e\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"npm i @justwe7/stylelint-order-standard -D")),(0,r.kt)("p",{parentName:"li"},".stylelintrc.js:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  extends: [\n    'stylelint-config-standard-scss',\n    'stylelint-config-recommended-vue/scss',\n    'stylelint-config-standard',\n    '@justwe7/stylelint-order-standard'\n  ],\n}\n\n")))),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"webpack\u4e2d\u914d\u7f6e"),(0,r.kt)("p",{parentName:"li"},"\u548ceslint\u4e00\u6837\uff0c\u5176\u5b9e\u52301.2\u6b65\u5b8c\u6210\u5df2\u7ecf\u53ef\u4ee5\u8fdb\u884c\u6821\u9a8c\u4e86\u3002npm script\u6dfb\u52a0\u4e00\u6761 ",(0,r.kt)("inlineCode",{parentName:"p"},'"lint:css": "stylelint \\"src/**/*.(vue|scss|css)\\""'),"\uff0c\u540c\u6837\u4e0d\u9002\u7528\u5f00\u53d1\u73af\u5883\uff0c\u9700\u8981\u65b0\u589ewebpack\u63d2\u4ef6\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/stylelint-webpack-plugin"},"stylelint-webpack-plugin")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const StylelintPlugin = require('stylelint-webpack-plugin')\n\nplugins: [\n  new StylelintPlugin({\n    cache: true,\n    fix: true,\n    // failOnError: false,\n    extensions: ['scss', 'vue', 'css']\n  }),\n]\n")),(0,r.kt)("p",{parentName:"li"},"\u4e24\u4e2a\u63d2\u4ef6\u914d\u7f6e\u7684\u53c2\u6570\u633a\u4e00\u81f4\u7684\uff0c\u70b9\u8d5e~"))),(0,r.kt)("h4",{id:"hysky"},"hysky"),(0,r.kt)("p",null,"\u7ea6\u5b9a\u4e86\u4ee3\u7801\u89c4\u8303\uff0c\u5047\u5982\u4e0d\u9075\u5b88\u4e0d\u5982\u4e0d\u7ea6\u5b9a\uff0c\u52a0\u4e00\u4e2aprecommit\u7684\u6821\u9a8c\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u89c4\u8303\u7684\u6267\u884c\u3002\u4f7f\u7528",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/husky"},"husky"),"\u53ef\u4ee5\u66f4\u65b9\u4fbf\u7684\u5b9a\u4e49Git Hooks\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'npm install husky --save-dev\n\nnpm set-script prepare "husky install"\nnpm run prepare\n')),(0,r.kt)("p",null,"\u6dfb\u52a0hook:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Eslint\u7684pre commit\u6821\u9a8c"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'npx husky add .husky/pre-commit "npm run lint" \ngit add .husky/pre-commit\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"stylelint\u7684pre commit\u6821\u9a8c"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'npx husky add .husky/pre-commit "npm run lint:css" \ngit add .husky/pre-commit\n')))),(0,r.kt)("p",null,"\u4f1a\u5c06\u6821\u9a8c\u6307\u4ee4\u5199\u5165\u5230 .husky/pre-commit \u7684\u5185\u5bb9\u4e2d"),(0,r.kt)("p",null,"\u4e4b\u540e\u8fdb\u884cgit commit\u63d0\u4ea4\u7248\u672c\u5e93\u65f6\uff0c\u4f1a\u4f9d\u6b21\u8fdb\u884ceslint\u548cstylint\u7684\u6821\u9a8c\uff0c\u5047\u5982\u4e0d\u7b26\u5408\u89c4\u5219\uff0c\u6d41\u7a0b\u4f1a\u7ec8\u6b62"),(0,r.kt)("h3",{id:"\u7f8e\u5316\u8f93\u51fa"},"\u7f8e\u5316\u8f93\u51fa"),(0,r.kt)("h4",{id:"friendlyerrorsplugin"},"FriendlyErrorsPlugin"),(0,r.kt)("p",null,"\u4f7f\u7528",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@soda/friendly-errors-webpack-plugin"},"friendly-errors-webpack-plugin"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"npm install @soda/friendly-errors-webpack-plugin --save-dev")),(0,r.kt)("p",null,"\u65b0\u589e\u914d\u7f6e"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const FriendlyErrorsWebpackPlugin = require('@soda/friendly-errors-webpack-plugin')\n\nplugins: [\n  new FriendlyErrorsWebpackPlugin(), // \u8f93\u51fa\u7f8e\u5316\n]\n")),(0,r.kt)("p",null,"\u6548\u679c\uff1a",(0,r.kt)("img",{parentName:"p",src:"https://testingcf.jsdelivr.net/gh/justwe7/cdn/images/2022/05/31/imagec3641.png",alt:"imagec3641.png"})),(0,r.kt)("p",null,"\u914d\u5408 node-notifier \u5b9e\u73b0\u7f16\u8bd1\u62a5\u9519\u901a\u77e5\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const FriendlyErrorsWebpackPlugin = require('@soda/friendly-errors-webpack-plugin')\nconst notifier = require('node-notifier')\n\nplugins: [\n  new FriendlyErrorsWebpackPlugin({\n    onErrors: (severity, errors) => {\n        if (severity !== 'error') {\n          return;\n        }\n        const error = errors[0];\n        notifier.notify({\n          title: 'webpackError - ' + error.name,\n          message: error.file,\n          // message: error.message\n        });\n      }\n      compilationSuccessInfo: {\n        messages: ['You application is running here http://localhost:3000'],\n        notes: ['Some additional notes to be displayed upon successful compilation']\n      },\n  }), // \u8f93\u51fa\u7f8e\u5316\n]\n")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://testingcf.jsdelivr.net/gh/justwe7/cdn/images/2022/05/31/image.png",alt:"image.png"})),(0,r.kt)("h4",{id:"webpackbar"},"webpackbar"),(0,r.kt)("p",null,"\u8fd9\u4e2a\u662fnuxt\u56e2\u961f\u505a\u7684\u7f8e\u5316\u63d2\u4ef6\uff0c\u4e2a\u4eba\u66f4\u559c\u6b22\u5b83\u7684\u6837\u5f0f\uff08\u867d\u7136\u611f\u89c9\u5b9e\u7528\u6027\u4e0d\u5982\u4e0a\u4e00\u4e2a\u63d2\u4ef6\uff09"),(0,r.kt)("p",null,"\u5b89\u88c5 ",(0,r.kt)("inlineCode",{parentName:"p"},"npm i webpackbar")," "),(0,r.kt)("p",null,"\u5982\u679c\u8981\u540c\u65f6\u7f16\u8bd1\u591a\u4e2awebpack\u5165\u53e3\uff0c\u53ef\u4ee5\u66f4\u660e\u663e\u7684\u533a\u5206\u6837\u5f0f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const WebpackBar = require('webpackbar')\n\nplugins: [\n  new WebpackBar({ name: 'client', color: 'green' }),\n]\n")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://testingcf.jsdelivr.net/gh/justwe7/cdn/images/2022/05/31/imagef9362.png",alt:"imagef9362.png"})),(0,r.kt)("h3",{id:"\u4f18\u5316\u6253\u5305\u901f\u5ea6"},"\u4f18\u5316\u6253\u5305\u901f\u5ea6"),(0,r.kt)("p",null,"\u6838\u5fc3\u601d\u8def\uff1a"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u52a0\u7f13\u5b58\uff0c\u641e\u5e76\u884c\uff0c\u63d0\u524d\u505a\uff0c\u5c11\u6267\u884c   ",(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6844903952140468232"},"https://juejin.cn/post/6844903952140468232"))),(0,r.kt)("h4",{id:"thread-loader"},"thread-loader"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"npm install thread-loader -D")," \u53ef\u4ee5\u5c06\u6bd4\u8f83\u8017\u65f6\u7684loader\u653e\u5728\u4e00\u4e2a\u5355\u72ec\u7684worker\u6c60\u4e2d\u8fd0\u884c\uff1a"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u591a\u8fdb\u7a0b\u6253\u5305\uff0c\u628a\u8fd9\u4e2a loader \u653e\u7f6e\u5728\u5176\u4ed6 loader \u4e4b\u524d\uff0c \u653e\u7f6e\u5728\u8fd9\u4e2a loader \u4e4b\u540e\u7684 loader \u5c31\u4f1a\u5728\u4e00\u4e2a\u5355\u72ec\u7684 worker \u6c60(worker pool)\u4e2d\u8fd0\u884c")),(0,r.kt)("p",null,"\u5728 worker \u6c60(worker pool)\u4e2d\u8fd0\u884c\u7684 loader \u662f\u53d7\u5230\u9650\u5236\u7684\u3002\u4f8b\u5982\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8fd9\u4e9b loader \u4e0d\u80fd\u4ea7\u751f\u65b0\u7684\u6587\u4ef6\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u8fd9\u4e9b loader \u4e0d\u80fd\u4f7f\u7528\u5b9a\u5236\u7684 loader API\uff08\u4e5f\u5c31\u662f\u8bf4\uff0c\u901a\u8fc7\u63d2\u4ef6\uff09\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u8fd9\u4e9b loader \u65e0\u6cd5\u83b7\u53d6 webpack \u7684\u9009\u9879\u8bbe\u7f6e\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"rules: [    \n        {\n        test: /\\.js$/,\n        use: [\n          {\n            loader: 'thread-loader',\n            // \u6709\u540c\u6837\u914d\u7f6e\u7684 loader \u4f1a\u5171\u4eab\u4e00\u4e2a worker \u6c60\n            options: {\n              // \u4ea7\u751f\u7684 worker \u7684\u6570\u91cf\uff0c\u9ed8\u8ba4\u662f (cpu \u6838\u5fc3\u6570 - 1)\uff0c\u6216\u8005\uff0c. \u5728 require('os').cpus() \u662f undefined \u65f6\u56de\u9000\u81f3 1\n              workers: 2,\n              // \u4e00\u4e2a worker \u8fdb\u7a0b\u4e2d\u5e76\u884c\u6267\u884c\u5de5\u4f5c\u7684\u6570\u91cf.\u9ed8\u8ba4\u4e3a 20\n              workerParallelJobs: 50,\n              // \u989d\u5916\u7684 node.js \u53c2\u6570\n              workerNodeArgs: ['--max-old-space-size=2048'],\n              // \u5141\u8bb8\u91cd\u65b0\u751f\u6210\u4e00\u4e2a\u50f5\u6b7b\u7684 work \u6c60\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u964d\u4f4e\u6574\u4f53\u7f16\u8bd1\u901f\u5ea6.\u5e76\u4e14\u5f00\u53d1\u73af\u5883\u5e94\u8be5\u8bbe\u7f6e\u4e3a false\n              poolRespawn: false,\n              // \u95f2\u7f6e\u65f6\u5b9a\u65f6\u5220\u9664 worker \u8fdb\u7a0b\u3002\u9ed8\u8ba4\u4e3a 500\uff08ms\uff09.\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u65e0\u7a77\u5927\uff0c\u8fd9\u6837\u5728\u76d1\u89c6\u6a21\u5f0f(--watch)\u4e0b\u53ef\u4ee5\u4fdd\u6301 worker \u6301\u7eed\u5b58\u5728\n              poolTimeout: 2000,\n              // \u6c60\u5206\u914d\u7ed9 worker \u7684\u5de5\u4f5c\u6570\u91cf\u3002\u9ed8\u8ba4\u4e3a 200 \u964d\u4f4e\u8fd9\u4e2a\u6570\u503c\u4f1a\u964d\u4f4e\u603b\u4f53\u7684\u6548\u7387\uff0c\u4f46\u662f\u4f1a\u63d0\u5347\u5de5\u4f5c\u5206\u5e03\u66f4\u5747\u4e00\n              poolParallelJobs: 50,\n              // \u6c60\u7684\u540d\u79f0.\u53ef\u4ee5\u4fee\u6539\u540d\u79f0\u6765\u521b\u5efa\u5176\u4f59\u9009\u9879\u90fd\u4e00\u6837\u7684\u6c60\n              name: 'ssr-pool'\n            },\n          },\n          {\n            loader: 'babel-loader',\n            options: {\n              cacheDirectory: true // default cache directory in node_modules/.cache/babel-loader\n            }\n          }\n        ],\n        exclude: /node_modules/\n      },\n  ]\n")),(0,r.kt)("h4",{id:"babel"},"babel"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u7f16\u8bd1\u7f13\u5b58"),(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://babeljs.io/docs/en/babel-plugin-transform-runtime"},"@babel/plugin-transform-runtime")),"\uff0c\u629b\u5f03polyfill\uff0c\u4f18\u5316\u516c\u5171\u5305\u5927\u5c0f\uff0c\u5728\u3010js\u76f8\u5173\u3011\u7ae0\u8282\u6709\u914d\u7f6e\u65b9\u5f0f")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = function (api) {\n  api.cache(true) // \u4f7f\u7528\u7f13\u5b58\n  return {\n    presets: [\n      [\n        '@babel/preset-env',\n        {}\n      ]\n    ],\n    plugins: [\n      [\n        '@babel/plugin-transform-runtime',\n        {\n          absoluteRuntime: false,\n          corejs: 3,\n          helpers: true,\n          regenerator: true\n        }\n      ]\n    ]\n  }\n}\n\n")),(0,r.kt)("p",null,"\u9879\u76ee\u6253\u5305\u4f1a\u5728 node_modules/.cache/babel-loader \u751f\u6210\u7f13\u5b58\u6587\u4ef6"),(0,r.kt)("h4",{id:"webpack5-cache"},"webpack5-cache"),(0,r.kt)("p",null,"\u5176\u5b9e\u4f7f\u7528webpack5\u81ea\u5e26\u7684\u7f13\u5b58\u673a\u5236\u5b8c\u5168\u53ef\u4ee5\u66ff\u4ee3",(0,r.kt)("inlineCode",{parentName:"p"},"AutoDllPlugin "),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"HardSourceWebpackPlugin"),"\u4e14\u6bd4\u5b83\u4eec\u66f4\u5feb\u3002\u66f4\u91cd\u8981\u7684\u662f\u6bd4\u4ed6\u4eec\u914d\u7f6e\u7b80\u5355\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  cache: {\n    type: 'filesystem', // \u9ed8\u8ba4\u4f7f\u7528\u7684\u662fmemory\uff0c\u7a7a\u95f4\u6362\u65f6\u95f4~\u4f7f\u7528\u78c1\u76d8\u7f13\u5b58\n    name: 'clientCache-'\n  },\n};\n")),(0,r.kt)("p",null,"\u4e4b\u540e\u6253\u5305\u4f1a\u5728 node_modules/.cache/webpack \u751f\u6210\u7f13\u5b58\u6587\u4ef6"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5bf9\u6bd4")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u672a\u914d\u7f6e\u7f13\u5b58\uff0c\u9879\u76ee\u4e09\u6b21\u6253\u5305\u65f6\u95f4\u4f9d\u6b21\u4e3a10.73\u30019.34\u30019.4"),(0,r.kt)("li",{parentName:"ul"},"\u914d\u7f6e\u7f13\u5b58\uff0c\u4e09\u6b21\u6253\u5305\u65f6\u95f4\u5206\u522b\u4e3a10.08\u30012.4\u30012.66")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://s2.loli.net/2022/06/25/CaLdkVjXgmucAUM.png",alt:null})),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://s2.loli.net/2022/06/01/Pt6w4VYLgGMAqrb.png",alt:"image-20220601181935175"})),(0,r.kt)("p",null,"\u9488\u5bf9\u8fd9\u4e2a\u6f14\u793a\u9879\u76ee\uff0c\u4f7f\u7528\u7f13\u5b58\u5728\u6253\u5305\u901f\u5ea6\u4e0a\u63d0\u5347\u4e86400%"),(0,r.kt)("h4",{id:"\u5176\u4ed6\u7f13\u5b58"},"\u5176\u4ed6\u7f13\u5b58"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"eslint-plugin\u3001stylelint-plugin\u914d\u7f6e\u7f13\u5b58"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"    new ESLintPlugin({\n      cache: true,\n      ...\n    }),\n    new StylelintPlugin({\n      cache: true,\n      ...\n    }),\n")))))}d.isMDXComponent=!0}}]);